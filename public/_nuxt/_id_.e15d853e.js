import{d as T,ag as A,r as l,C as B,o as u,a as d,f as K,y as h,b as e,e as v,ap as k,at as x,K as f,L as V,g as F,a4 as m,l as U}from"./entry.95308f2b.js";import{_ as E}from"./BaseTextarea.vue.793866e0.js";import{u as M}from"./composables.03bf4a43.js";const $=e("div",{class:"flex w-full flex-wrap items-center justify-between px-3 ml-5 -mt-16"},[e("h1",{class:"mb-2 mt-0 text-2xl font-medium leading-tight text-black"}," Edit Toko ")],-1),N=["onSubmit"],R={class:"border-muted-200"},L={class:"nui-card nui-card-rounded-sm nui-card-default"},z={class:"bg-white dark:bg-muted-800/70 p-10"},J={class:"col-span-12 mt-6"},O={class:"col-span-12"},q={class:"col-span-12 mt-6"},G={class:"col-span-12"},H={class:"col-span-12 mt-6"},Q={class:"col-span-12"},W={class:"col-span-12 sm:col-span-6 mt-6"},X={class:"flex w-full flex-col gap-4 sm:flex-row"},Y={class:"relative grow"},Z={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},ee=e("label",{class:"nui-input-label",for:"nui-input-f39c7d2d-067e-400e-ac21-d2292df2f668"},"Provinsi",-1),se={class:"nui-select-wrapper nui-select-default nui-select-md nui-select-rounded-sm"},te=e("option",{value:null},"Pilih Provinsi",-1),oe=["value"],ne=e("div",{class:"nui-select-chevron nui-chevron border-unset"},[e("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",class:"nui-select-chevron-inner"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m6 9 6 6 6-6"})])],-1),ae=e("div",{class:"vc-popover-content-wrapper is-interactive"},null,-1),le={class:"col-span-12 sm:col-span-6 mt-6"},ie={class:"flex w-full flex-col gap-4 sm:flex-row"},ce={class:"relative grow"},ue={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},de=e("label",{class:"nui-input-label",for:"nui-input-f39c7d2d-067e-400e-ac21-d2292df2f668"},"Kota / Kabupaten",-1),re={class:"nui-select-wrapper nui-select-default nui-select-md nui-select-rounded-sm"},pe=["disabled"],ve=e("option",{value:null},"Pilih Kota / Kabupaten",-1),me=["value"],_e=e("div",{class:"nui-select-chevron nui-chevron border-unset"},[e("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",class:"nui-select-chevron-inner"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m6 9 6 6 6-6"})])],-1),he=e("div",{class:"vc-popover-content-wrapper is-interactive"},null,-1),fe={class:"col-span-12 sm:col-span-6 mt-6"},be={class:"flex w-full flex-col gap-4 sm:flex-row"},we={class:"relative grow"},ge={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},ye=e("label",{class:"nui-input-label",for:"nui-input-f39c7d2d-067e-400e-ac21-d2292df2f668"},"Kecamatan",-1),ke={class:"nui-select-wrapper nui-select-default nui-select-md nui-select-rounded-sm"},xe=["disabled"],Ve=e("option",{value:null},"Pilih Kecamatan",-1),je=["value"],Ce=e("div",{class:"nui-select-chevron nui-chevron border-unset"},[e("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",class:"nui-select-chevron-inner"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m6 9 6 6 6-6"})])],-1),Pe=e("div",{class:"vc-popover-content-wrapper is-interactive"},null,-1),Se={class:"col-span-12 mt-6"},Ie={class:"col-span-12"},De={class:"col-span-12 mt-6"},Te={class:"col-span-12"},Ae=e("br",null,null,-1),Be=e("div",{class:"text-center md:col-span-5"},[e("div",{class:"-mt-4 inline-flex w-full items-center justify-center gap-2 sm:w-auto"},[e("button",{type:"button",rel:"",target:"",class:"nui-button nui-button-md nui-button-rounded-sm nui-button-solid nui-button-default !h-12 w-full sm:w-40"}," Cancel "),e("button",{type:"submit",rel:"",target:"",class:"nui-button nui-button-md nui-button-rounded-sm nui-button-solid nui-button-primary !h-12 w-full sm:w-40"}," Submit ")])],-1),Re=T({__name:"[id]",setup(Ke){const j=A().params.id,{user:S,loggedIn:Ue}=M(),n=l({user_id:S.value.id,name:"",description:"",phone:"",address:"",origin_id:"",origin_type:"subdistrict",postal_code:"",latitude:0,longitude:0,city_id:"",province_id:""}),C=l([]),b=l([]),P=l([]),i=l(null),a=l(null),r=l(null),c=l(!1),_=l(null),I=async()=>{try{c.value=!0;const s=await m("https://api.dev.commerce.waktoo.com:443/api/shipping/province").headers({"Content-Type":"application/json"}).get().json();s&&s.status==="success"?C.value=s.data.province:console.error("Failed to fetch data from provinces API:",s)}catch(s){_.value=s.message,console.error("Error:",s)}finally{c.value=!1}},w=async()=>{if(i.value){console.log("provinsi id",i.value),console.log("city id",a.value),console.log("district id",r.value);try{c.value=!0;const s=await m(`https://api.dev.commerce.waktoo.com:443/api/shipping/city?province_id=${i.value}`).headers({"Content-Type":"application/json"}).get().json();s&&s.status==="success"?b.value=s.data.city:console.error("Failed to fetch data from cities API:",s),s&&s.status==="success"?b.value=s.data.city:console.error("Failed to fetch data from product-province API:",s)}catch(s){_.value=s.message,console.error("Error:",s)}finally{c.value=!1}}},g=async()=>{if(console.log("district city id",a.value),!!a.value)try{c.value=!0;const s=await m(`https://api.dev.commerce.waktoo.com:443/api/shipping/subdistrict?city_id=${a.value}`).headers({"Content-Type":"application/json"}).get().json();s&&s.status==="success"?P.value=s.data.subdistrict:console.error("Failed to fetch data from districts API:",s)}catch(s){_.value=s.message,console.error("Error:",s)}finally{c.value=!1}};I(),w(),g(),B(()=>n.value.province_id,async s=>{s&&(i.value=s,await w(),a.value=n.value.city_id,await g(),r.value=n.value.origin_id)}),(async()=>{try{c.value=!0;const s=await m(`https://api.dev.commerce.waktoo.com:443/api/shops/${j}`).headers({"Content-Type":"application/json"}).get().json();s&&s.status==="success"?n.value=s.data.shop:console.error("Failed to fetch data from shop API:",s)}catch(s){_.value=s.message,console.error("Error:",s)}finally{c.value=!1}})();const D=async()=>{try{const s={...n.value,province_id:i.value,city_id:a.value,origin_id:r.value};console.log("Form data:",s);const o=localStorage.getItem("token");console.log("token:",o);const y=await(await m(`https://api.dev.commerce.waktoo.com:443/api/shops/${j}`).headers({Authorization:`Bearer ${o}`,"Content-Type":"application/json"}).put(s).res()).json();console.log("Shop Response:",y)}catch(s){console.error("Error:",s)}};return(s,o)=>{const p=U,y=E;return u(),d(f,null,[$,K(" "+h(n.value)+" ",1),e("form",{onSubmit:F(D,["prevent"]),class:"mx-auto w-full"},[e("div",R,[e("div",L,[e("div",z,[e("div",J,[e("div",O,[v(p,{label:"Name",placeholder:"Masukan Nama",modelValue:n.value.name,"onUpdate:modelValue":o[0]||(o[0]=t=>n.value.name=t)},null,8,["modelValue"])])]),e("div",q,[e("div",G,[v(y,{label:"Deskripsi",shape:"curved",placeholder:"Masukan Deskripsi",rows:"4",modelValue:n.value.description,"onUpdate:modelValue":o[1]||(o[1]=t=>n.value.description=t)},null,8,["modelValue"])])]),e("div",H,[e("div",Q,[v(p,{label:"Phone",placeholder:"Masukan No Telepon",modelValue:n.value.phone,"onUpdate:modelValue":o[2]||(o[2]=t=>n.value.phone=t)},null,8,["modelValue"])])]),e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[ee,e("div",se,[e("div",null,[k(e("select",{"onUpdate:modelValue":o[3]||(o[3]=t=>i.value=t),onChange:w,class:"nui-select nui-select border-unset",id:"province"},[te,(u(!0),d(f,null,V(C.value,t=>(u(),d("option",{key:t.province_id,value:t.province_id},h(t.province_name),9,oe))),128))],544),[[x,i.value]]),ne])])])])]),ae]),e("div",le,[e("div",ie,[e("div",ce,[e("div",ue,[de,e("div",re,[e("div",null,[k(e("select",{"onUpdate:modelValue":o[4]||(o[4]=t=>a.value=t),disabled:!i.value,onChange:g,class:"nui-select nui-select border-unset",id:"city"},[ve,(u(!0),d(f,null,V(b.value,t=>(u(),d("option",{key:t.city_id,value:t.city_id},h(t.city_name),9,me))),128))],40,pe),[[x,a.value]]),_e])])])])]),he]),e("div",fe,[e("div",be,[e("div",we,[e("div",ge,[ye,e("div",ke,[e("div",null,[k(e("select",{"onUpdate:modelValue":o[5]||(o[5]=t=>r.value=t),disabled:!a.value,class:"nui-select nui-select border-unset",id:"district"},[Ve,(u(!0),d(f,null,V(P.value,t=>(u(),d("option",{key:t.subdistrict_id,value:t.subdistrict_id},h(t.subdistrict_name),9,je))),128))],8,xe),[[x,r.value]]),Ce])])])])]),Pe]),e("div",Se,[e("div",Ie,[v(p,{label:"Alamat",placeholder:"Masukan Alamat",modelValue:n.value.address,"onUpdate:modelValue":o[6]||(o[6]=t=>n.value.address=t)},null,8,["modelValue"])])]),e("div",De,[e("div",Te,[v(p,{label:"Kode POS",placeholder:"Masukan Kode Pos",modelValue:n.value.postal_code,"onUpdate:modelValue":o[7]||(o[7]=t=>n.value.postal_code=t)},null,8,["modelValue"])])])])])]),Ae,Be],40,N)],64)}}});export{Re as default};
