import{d as U,as as A,D as M,r as l,c as x,o as i,a,b as e,e as v,ap as S,at as V,K as m,L as D,g as F,a4 as h,l as E,y as P}from"./entry.95308f2b.js";import{_ as N}from"./BaseTextarea.vue.793866e0.js";import{u as $}from"./composables.03bf4a43.js";const R=e("div",{class:"flex w-full flex-wrap items-center justify-between px-3 ml-5 -mt-16"},[e("h1",{class:"mb-2 mt-0 text-2xl font-medium leading-tight text-black"}," Tambah Toko ")],-1),L=["onSubmit"],z={class:"border-muted-200"},J={class:"nui-card nui-card-rounded-sm nui-card-default"},O={class:"bg-white dark:bg-muted-800/70 p-10"},q={class:"col-span-12 mt-6"},G={class:"col-span-12"},H={class:"col-span-12 mt-6"},Q={class:"col-span-12"},W={class:"col-span-12 mt-6"},X={class:"col-span-12"},Y={class:"col-span-12 sm:col-span-6 mt-6"},Z={class:"flex w-full flex-col gap-4 sm:flex-row"},ee={class:"relative grow"},te={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},se=e("label",{class:"nui-input-label",for:"nui-input-f39c7d2d-067e-400e-ac21-d2292df2f668"},"Provinsi",-1),oe={class:"nui-select-wrapper nui-select-default nui-select-md nui-select-rounded-sm"},ne=e("option",{value:null},"Pilih Provinsi",-1),le=["value"],ie=e("div",{class:"nui-select-chevron nui-chevron border-unset"},[e("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",class:"nui-select-chevron-inner"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m6 9 6 6 6-6"})])],-1),ae=e("div",{class:"vc-popover-content-wrapper is-interactive"},null,-1),ce={class:"col-span-12 sm:col-span-6 mt-6"},de={class:"flex w-full flex-col gap-4 sm:flex-row"},re={class:"relative grow"},ue={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},pe=e("label",{class:"nui-input-label",for:"nui-input-f39c7d2d-067e-400e-ac21-d2292df2f668"},"Kota / Kabupaten",-1),ve={class:"nui-select-wrapper nui-select-default nui-select-md nui-select-rounded-sm"},_e=["disabled"],me=e("option",{value:null},"Pilih Kota / Kabupaten",-1),he=["value"],fe=e("div",{class:"nui-select-chevron nui-chevron border-unset"},[e("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",class:"nui-select-chevron-inner"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m6 9 6 6 6-6"})])],-1),ge=e("div",{class:"vc-popover-content-wrapper is-interactive"},null,-1),be={class:"col-span-12 sm:col-span-6 mt-6"},we={class:"flex w-full flex-col gap-4 sm:flex-row"},ye={class:"relative grow"},ke={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},xe=e("label",{class:"nui-input-label",for:"nui-input-f39c7d2d-067e-400e-ac21-d2292df2f668"},"Kecamatan",-1),Se={class:"nui-select-wrapper nui-select-default nui-select-md nui-select-rounded-sm"},Ve=["disabled"],De=e("option",{value:null},"Pilih Kecamatan",-1),Pe=["value"],Ce=e("div",{class:"nui-select-chevron nui-chevron border-unset"},[e("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",class:"nui-select-chevron-inner"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m6 9 6 6 6-6"})])],-1),Ie=e("div",{class:"vc-popover-content-wrapper is-interactive"},null,-1),je={class:"col-span-12 mt-6"},Be={class:"col-span-12"},Ke={class:"col-span-12 mt-6"},Te={class:"col-span-12"},Ue=e("br",null,null,-1),Ae=e("div",{class:"text-center md:col-span-5"},[e("div",{class:"-mt-4 inline-flex w-full items-center justify-center gap-2 sm:w-auto"},[e("button",{type:"button",rel:"",target:"",class:"nui-button nui-button-md nui-button-rounded-sm nui-button-solid nui-button-default !h-12 w-full sm:w-40"}," Cancel "),e("button",{type:"submit",rel:"",target:"",class:"nui-button nui-button-md nui-button-rounded-sm nui-button-solid nui-button-primary !h-12 w-full sm:w-40"}," Submit ")])],-1),Re=U({__name:"create",setup(Me){A();const{user:j,loggedIn:Fe}=$(),n=M({user_id:j.value.id,name:"",description:"",phone:null,address:"",origin_id:"",origin_type:"subdistrict",postal_code:"",latitude:0,longitude:0,city_id:"",province_id:""}),f=l([]),g=l([]),b=l([]),c=l(null),d=l(""),p=l(""),r=l(!1),w=l(null),B=async()=>{try{r.value=!0;const s=await h("https://api.dev.commerce.waktoo.com:443/api/shipping/province").headers({"Content-Type":"application/json"}).get().json();s&&s.status==="success"?f.value=s.data.province:console.error("Failed to fetch data from product-province API:",s)}catch(s){w.value=s.message,console.error("Error:",s)}finally{r.value=!1}},C=async()=>{const s=c.value.province_id;if(s)try{r.value=!0;const t=await h(`https://api.dev.commerce.waktoo.com:443/api/shipping/city?province_id=${s}`).headers({"Content-Type":"application/json"}).get().json();t&&t.status==="success"?g.value=t.data.city:console.error("Failed to fetch data from product-province API:",t)}catch(t){w.value=t.message,console.error("Error fetching cities:",t)}finally{r.value=!1}},I=async()=>{const s=d.value.city_id;if(s)try{r.value=!0;const t=await h(`https://api.dev.commerce.waktoo.com:443/api/shipping/subdistrict?city_id=${s}`).headers({"Content-Type":"application/json"}).get().json();t&&t.status==="success"?b.value=t.data.subdistrict:console.error("Failed to fetch data from product-province API:",t)}catch(t){w.value=t.message,console.error("Error fetching cities:",t)}finally{r.value=!1}},y=x({get:()=>{const s=c.value?c.value.province_id:null;return console.log("Selected Province ID (get):",s),s},set:s=>{console.log("Setting Selected Province ID to:",s),c.value=f.value.find(t=>t.province_id===s)||null,console.log("Selected Province:",c.value)}}),k=x({get:()=>{const s=d.value?d.value.city_id:null;return console.log("Selected City ID (get):",s),s},set:s=>{console.log("Setting Selected City ID to:",s),d.value=g.value.find(t=>t.city_id===s)||null,console.log("Selected City:",d.value)}}),_=x({get:()=>{console.log(p.value.subdistrict_id);const s=p.value?p.value.subdistrict_id:null;return console.log("Selected Disctrict ID (get):",s),s},set:s=>{console.log("Setting Selected Disctrict ID to:",s),p.value=b.value.find(t=>t.subdistrict_id===s)||null,console.log("Selected Disctrict:",p.value)}});B(),C(),I();const K=async()=>{try{console.log(_);const s={...n,province_id:y.value,city_id:k.value,origin_id:_.value};console.log("Form data:",s);const t=localStorage.getItem("token");console.log("token:",t);const u=await h("https://api.dev.commerce.waktoo.com:443/api/shops").headers({Authorization:`Bearer ${t}`}).post(s).json();console.log("Shop Response:",u)}catch(s){console.error("Error:",s)}};return(s,t)=>{const u=E,T=N;return i(),a(m,null,[R,e("form",{onSubmit:F(K,["prevent"]),class:"mx-auto w-full"},[e("div",z,[e("div",J,[e("div",O,[e("div",q,[e("div",G,[v(u,{label:"Name",placeholder:"Masukan Nama",modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=o=>n.name=o)},null,8,["modelValue"])])]),e("div",H,[e("div",Q,[v(T,{label:"Deskripsi",shape:"curved",placeholder:"Masukan Deskripsi",rows:"4",modelValue:n.description,"onUpdate:modelValue":t[1]||(t[1]=o=>n.description=o)},null,8,["modelValue"])])]),e("div",W,[e("div",X,[v(u,{label:"Phone",placeholder:"Masukan No Telepon",modelValue:n.phone,"onUpdate:modelValue":t[2]||(t[2]=o=>n.phone=o)},null,8,["modelValue"])])]),e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[se,e("div",oe,[e("div",null,[S(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>y.value=o),onChange:C,class:"nui-select nui-select border-unset",id:"province"},[ne,(i(!0),a(m,null,D(f.value,o=>(i(),a("option",{key:o.province_id,value:o.province_id},P(o.province_name),9,le))),128))],544),[[V,y.value]]),ie])])])])]),ae]),e("div",ce,[e("div",de,[e("div",re,[e("div",ue,[pe,e("div",ve,[e("div",null,[S(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>k.value=o),disabled:!c.value,onChange:I,class:"nui-select nui-select border-unset",id:"city"},[me,(i(!0),a(m,null,D(g.value,o=>(i(),a("option",{key:o.city_id,value:o.city_id},P(o.city_name),9,he))),128))],40,_e),[[V,k.value]]),fe])])])])]),ge]),e("div",be,[e("div",we,[e("div",ye,[e("div",ke,[xe,e("div",Se,[e("div",null,[S(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>_.value=o),disabled:!d.value,class:"nui-select nui-select border-unset",id:"district"},[De,(i(!0),a(m,null,D(b.value,o=>(i(),a("option",{key:o.subdistrict_id,value:o.subdistrict_id},P(o.subdistrict_name),9,Pe))),128))],8,Ve),[[V,_.value]]),Ce])])])])]),Ie]),e("div",je,[e("div",Be,[v(u,{label:"Alamat",placeholder:"Masukan Alamat",modelValue:n.address,"onUpdate:modelValue":t[6]||(t[6]=o=>n.address=o)},null,8,["modelValue"])])]),e("div",Ke,[e("div",Te,[v(u,{label:"Kode POS",placeholder:"Masukan Kode Pos",modelValue:n.postal_code,"onUpdate:modelValue":t[7]||(t[7]=o=>n.postal_code=o)},null,8,["modelValue"])])])])])]),Ue,Ae],40,L)],64)}}});export{Re as default};
