import{_ as J}from"./DKAPklYH.js";import{d as L,N as O,O as Q,a as X,r as c,J as A,o as r,c as Y,e as m,g as e,h as d,i as V,F as K,k as N,t as $,G as Z,f as I,H as ee,_ as te,y as se,z as oe,m as _,A as ae}from"./DmTmMO_-.js";import{_ as le}from"./21j5a1Cb.js";import{_ as ie}from"./C_jKOqdG.js";import{_ as ne}from"./BaWAYAlg.js";import{_ as de}from"./Wwwchkvl.js";import{u as ce}from"./BCX54yQo.js";import{u as E}from"./BHLlrkjG.js";import"./D7JqdvHr.js";import"./C100mYQ1.js";import"./DzMF6t2X.js";import"./CSxYk3-N.js";import"./DLP8OW-a.js";import"./C5pBaPI_.js";const l=g=>(se("data-v-e7de8718"),g=g(),oe(),g),re={class:"mb-2"},ue={class:"border-muted-200"},me={class:"nui-card nui-card-rounded-sm nui-card-default"},pe={class:"bg-white dark:bg-muted-800/70 p-10"},_e={class:"mb-2"},ge=l(()=>e("div",{class:"mlls"},[e("div",{class:"title-m-1"},"Informasi Toko"),e("div",{class:"title-m-2"},"Ini adalah informasi yang pertama ditampilkan untuk pelanggan")],-1)),ve={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},he=l(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Nama Toko"),_(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Nama toko minimal mempunyai 5 karakter.")],-1)),fe={class:"line-height-normal"},be={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},ke=l(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Deskripsi Toko"),e("br"),e("span",{class:"title-m-2"},"Pastikan deskripsi toko memuat penjelasan detail terkait tokomu."),e("br"),e("span",{class:"title-m-2"},"agar pembeli mudah mengerti dan menemukan tokomu.")],-1)),ye={class:"line-height-normal"},Ve={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Ie=l(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"No Telepon / Wa"),_(),e("span",{class:"alert-red"},"Wajib"),e("br")],-1)),Se={class:"line-height-normal"},we=l(()=>e("br",null,null,-1)),Pe={class:"border-muted-200"},Te={class:"nui-card nui-card-rounded-sm nui-card-default"},Ce={class:"bg-white dark:bg-muted-800/70 p-10"},De={class:"mb-2"},je=l(()=>e("div",{class:"mlls"},[e("div",{class:"title-m-1"},"Alamat"),e("div",{class:"title-m-2"},"Ini adalah informasi yang pertama ditampilkan untuk pelanggan")],-1)),xe={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Be=l(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Provinsi"),_(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Pilih Provinsi yang sesuai dengan alamatmu.")],-1)),Ae={class:"line-height-normal"},Ke=l(()=>e("option",{value:null},"Pilih Provinsi",-1)),Ne=["value"],$e={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Ue=l(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Kota / Kabupaten"),_(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Pilih Kota / Kabupaten yang sesuai dengan alamatmu.")],-1)),Fe={class:"line-height-normal"},We=l(()=>e("option",{value:null},"Pilih Kota / Kabupaten",-1)),qe=["value"],Ee={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Le=l(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Kecamatan"),_(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Pilih Kecamatan yang sesuai dengan alamatmu.")],-1)),Me={class:"line-height-normal"},ze=l(()=>e("option",{value:null},"Pilih Kecamatan",-1)),Ge=["value"],Re={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},He=l(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Kode Pos"),_(),e("span",{class:"alert-red"},"Wajib"),e("br")],-1)),Je={class:"line-height-normal"},Oe={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Qe=l(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Alamat"),e("br"),e("span",{class:"title-m-2"},"Pastikan deskripsi alamat memuat penjelasan detail terkait alamatmu."),e("br")],-1)),Xe={class:"line-height-normal"},Ye={class:"flex justify-center fixed bottom-8 inset-x-0"},Ze={class:"p-6 rounded-lg shadow-inner bg-white w-fit line-height-normal"},et=l(()=>e("button",{type:"submit",class:"static nui-button nui-button-md nui-button-rounded-sm nui-button-solid nui-button-primary !h-12 sm:w-40 mx-2 transform transition-transform duration-300 hover:scale-105"}," Submit ",-1)),tt=L({__name:"TokoCreate",setup(g){O(),Q();const S=ce(),{token:U}=E(),{user:h,loggedIn:ot}=E(),n=X({user_id:h.value.id,name:"",description:"",phone:null,address:"",origin_id:"",origin_type:"subdistrict",postal_code:"",latitude:0,longitude:0,city_id:"",province_id:""}),M=h.value.id;console.log("user",M);const w=c([]),P=c([]),T=c([]),u=c(""),p=c(""),v=c(""),f=c(!1),b=c(!1),k=c(!1),C=c(null),z=async()=>{var s;try{f.value=!0;const t=await I("https://api.dev.commerce.waktoo.com:443/api/shipping/province").headers({"Content-Type":"application/json"}).get().json();t&&(t==null?void 0:t.status)==="success"?(w.value=(s=t==null?void 0:t.data)==null?void 0:s.province,f.value=!1):console.error("Failed to fetch data from product-province API:",t)}catch(t){C.value=t.message,console.error("Error:",t)}finally{f.value=!1}},F=async()=>{var t;const s=(t=u==null?void 0:u.value)==null?void 0:t.province_id;if(s)try{b.value=!0;const i=await I(`https://api.dev.commerce.waktoo.com:443/api/shipping/city?province_id=${s}`).headers({"Content-Type":"application/json"}).get().json();i&&(i==null?void 0:i.status)==="success"?(P.value=i.data.city,b.value=!1):console.error("Failed to fetch data from product-province API:",i)}catch(i){C.value=i.message,console.error("Error fetching cities:",i)}finally{b.value=!1}},W=async()=>{var t,i;const s=(t=p.value)==null?void 0:t.city_id;if(s)try{k.value=!0;const a=await I(`https://api.dev.commerce.waktoo.com:443/api/shipping/subdistrict?city_id=${s}`).headers({"Content-Type":"application/json"}).get().json();a&&(a==null?void 0:a.status)==="success"?(T.value=(i=a==null?void 0:a.data)==null?void 0:i.subdistrict,k.value=!1):console.error("Failed to fetch data from product-province API:",a)}catch(a){C.value=a==null?void 0:a.message,console.error("Error fetching cities:",a)}finally{k.value=!1}},D=A({get:()=>{const s=u.value?u.value.province_id:null;return console.log("Selected Province ID (get):",s),s},set:s=>{console.log("Setting Selected Province ID to:",s),u.value=w.value.find(t=>t.province_id===s)||null,console.log("Selected Province:",u.value)}}),j=A({get:()=>{const s=p.value?p.value.city_id:null;return console.log("Selected City ID (get):",s),s},set:s=>{console.log("Setting Selected City ID to:",s),p.value=P.value.find(t=>t.city_id===s)||null,console.log("Selected City:",p.value)}}),y=A({get:()=>{console.log(v.value.subdistrict_id);const s=v.value?v.value.subdistrict_id:null;return console.log("Selected Disctrict ID (get):",s),s},set:s=>{console.log("Setting Selected Disctrict ID to:",s),v.value=T.value.find(t=>t.subdistrict_id===s)||null,console.log("Selected Disctrict:",v.value)}});z(),F(),W();const G=async()=>{try{console.log(y);const s={...n,province_id:D.value,city_id:j.value,origin_id:y.value};console.log("Form data:",s);const t=await I("https://api.dev.commerce.waktoo.com:443/api/shops").headers({Authorization:`Bearer ${U.value}`}).post(s).json();console.log("Shop Response:",t),S.show({title:"Sukses",message:"Berhasil membuat toko",closable:!0,color:"success"}),ee("/toko-admin")}catch(s){console.error("Error:",s),S.show({title:"Gagal",message:"Gagal membuat toko",closable:!0,color:"danger"})}},R=[{label:"Home",hideLabel:!1,icon:"lucide:home",to:"/toko-admin"},{label:"Tambah Toko",hideLabel:!1,to:"#"}];return(s,t)=>{const i=J,a=te,H=le,x=ie,q=ne,B=de;return s.loading?(r(),Y(i,{key:0,type:"spinner"})):(r(),m("form",{key:1,onSubmit:Z(G,["prevent"])},[e("div",re,[d(H,{items:R},{default:V(()=>[d(a,{name:"lucide:chevron-right",class:"block size-3"})]),_:1})]),e("div",ue,[e("div",me,[e("div",pe,[e("div",_e,[ge,e("div",ve,[he,e("div",fe,[d(x,{placeholder:"Masukan Nama Toko",modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=o=>n.name=o)},null,8,["modelValue"])])]),e("div",be,[ke,e("div",ye,[d(q,{placeholder:"Tuliskan detail Toko....",modelValue:n.description,"onUpdate:modelValue":t[1]||(t[1]=o=>n.description=o)},null,8,["modelValue"])])]),e("div",Ve,[Ie,e("div",Se,[d(x,{placeholder:"Masukan No Telepon",modelValue:n.phone,"onUpdate:modelValue":t[2]||(t[2]=o=>n.phone=o),required:""},null,8,["modelValue"])])])])])])]),we,e("div",Pe,[e("div",Te,[e("div",Ce,[e("div",De,[je,e("div",xe,[Be,e("div",Ae,[d(B,{rounded:"sm",modelValue:D.value,"onUpdate:modelValue":t[3]||(t[3]=o=>D.value=o),onChange:F,id:"province",loading:f.value,required:""},{default:V(()=>[Ke,(r(!0),m(K,null,N(w.value,o=>(r(),m("option",{key:o.province_id,value:o.province_id},$(o.province_name),9,Ne))),128))]),_:1},8,["modelValue","loading"])])]),e("div",$e,[Ue,e("div",Fe,[d(B,{rounded:"sm",modelValue:j.value,"onUpdate:modelValue":t[4]||(t[4]=o=>j.value=o),disabled:!u.value,onChange:W,id:"city",loading:b.value,required:""},{default:V(()=>[We,(r(!0),m(K,null,N(P.value,o=>(r(),m("option",{key:o.city_id,value:o.city_id},$(o.city_name),9,qe))),128))]),_:1},8,["modelValue","disabled","loading"])])]),e("div",Ee,[Le,e("div",Me,[d(B,{rounded:"sm",modelValue:y.value,"onUpdate:modelValue":t[5]||(t[5]=o=>y.value=o),disabled:!p.value,id:"district",loading:k.value,required:""},{default:V(()=>[ze,(r(!0),m(K,null,N(T.value,o=>(r(),m("option",{key:o.subdistrict_id,value:o.subdistrict_id},$(o.subdistrict_name),9,Ge))),128))]),_:1},8,["modelValue","disabled","loading"])])]),e("div",Re,[He,e("div",Je,[d(x,{placeholder:"Masukan kode pos",modelValue:n.postal_code,"onUpdate:modelValue":t[6]||(t[6]=o=>n.postal_code=o),required:""},null,8,["modelValue"])])]),e("div",Oe,[Qe,e("div",Xe,[d(q,{placeholder:"Tuliskan detail Alamat....",modelValue:n.address,"onUpdate:modelValue":t[7]||(t[7]=o=>n.address=o),required:""},null,8,["modelValue"])])])])])])]),e("div",Ye,[e("div",Ze,[e("button",{type:"button",class:"static nui-button nui-button-md nui-button-rounded-sm nui-button-solid nui-button-default !h-12 sm:w-40 mx-2 transform transition-transform duration-300 hover:scale-105",onClick:t[8]||(t[8]=(...o)=>s.cancel&&s.cancel(...o))}," Cancel "),et])])],32))}}}),st=ae(tt,[["__scopeId","data-v-e7de8718"]]),ft=L({__name:"create",setup(g){return(S,U)=>{const h=st;return r(),m("div",null,[d(h,{class:"pe-4 xl:pe-10"})])}}});export{ft as default};
