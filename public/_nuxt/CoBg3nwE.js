import{a8 as z,J as g,C as J,r as y,X as K,a4 as X}from"./DmTmMO_-.js";var Y=Function.prototype.toString,h=Object.create,q=Object.prototype.toString,G=function(){function r(){this._keys=[],this._values=[]}return r.prototype.has=function(e){return!!~this._keys.indexOf(e)},r.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},r.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},r}();function H(){return new G}function Q(){return new WeakMap}var Z=typeof WeakMap<"u"?Q:H;function d(r){if(!r)return h(null);var e=r.constructor;if(e===Object)return r===Object.prototype?{}:h(r);if(e&&~Y.call(e).indexOf("[native code]"))try{return new e}catch{}return h(r)}function $(r){var e="";return r.global&&(e+="g"),r.ignoreCase&&(e+="i"),r.multiline&&(e+="m"),r.unicode&&(e+="u"),r.sticky&&(e+="y"),e}function rr(r){return r.flags}var er=/test/g.flags==="g"?rr:$;function P(r){var e=q.call(r);return e.substring(8,e.length-1)}function tr(r){return r[Symbol.toStringTag]||P(r)}var nr=typeof Symbol<"u"?tr:P,or=Object.defineProperty,cr=Object.getOwnPropertyDescriptor,_=Object.getOwnPropertyNames,C=Object.getOwnPropertySymbols,B=Object.prototype,j=B.hasOwnProperty,ar=B.propertyIsEnumerable,L=typeof C=="function";function ur(r){return _(r).concat(C(r))}var ir=L?ur:_;function v(r,e,t){for(var c=ir(r),a=0,u=c.length,o=void 0,n=void 0;a<u;++a)if(o=c[a],!(o==="callee"||o==="caller")){if(n=cr(r,o),!n){e[o]=t.copier(r[o],t);continue}!n.get&&!n.set&&(n.value=t.copier(n.value,t));try{or(e,o,n)}catch{e[o]=n.value}}return e}function fr(r,e){var t=new e.Constructor;e.cache.set(r,t);for(var c=0,a=r.length;c<a;++c)t[c]=e.copier(r[c],e);return t}function yr(r,e){var t=new e.Constructor;return e.cache.set(r,t),v(r,t,e)}function M(r,e){return r.slice(0)}function lr(r,e){return r.slice(0,r.size,r.type)}function pr(r,e){return new e.Constructor(M(r.buffer))}function gr(r,e){return new e.Constructor(r.getTime())}function F(r,e){var t=new e.Constructor;return e.cache.set(r,t),r.forEach(function(c,a){t.set(a,e.copier(c,e))}),t}function sr(r,e){return v(r,F(r,e),e)}function vr(r,e){var t=d(e.prototype);e.cache.set(r,t);for(var c in r)j.call(r,c)&&(t[c]=e.copier(r[c],e));return t}function Sr(r,e){var t=d(e.prototype);e.cache.set(r,t);for(var c in r)j.call(r,c)&&(t[c]=e.copier(r[c],e));for(var a=C(r),u=0,o=a.length,n=void 0;u<o;++u)n=a[u],ar.call(r,n)&&(t[n]=e.copier(r[n],e));return t}var Or=L?Sr:vr;function hr(r,e){var t=d(e.prototype);return e.cache.set(r,t),v(r,t,e)}function m(r,e){return new e.Constructor(r.valueOf())}function mr(r,e){var t=new e.Constructor(r.source,er(r));return t.lastIndex=r.lastIndex,t}function s(r,e){return r}function T(r,e){var t=new e.Constructor;return e.cache.set(r,t),r.forEach(function(c){t.add(e.copier(c,e))}),t}function dr(r,e){return v(r,T(r,e),e)}var Cr=Array.isArray,b=Object.assign,br=Object.getPrototypeOf||function(r){return r.__proto__},E={array:fr,arrayBuffer:M,blob:lr,dataView:pr,date:gr,error:s,map:F,object:Or,regExp:mr,set:T},wr=b({},E,{array:yr,map:sr,object:hr,set:dr});function Ar(r){return{Arguments:r.object,Array:r.array,ArrayBuffer:r.arrayBuffer,Blob:r.blob,Boolean:m,DataView:r.dataView,Date:r.date,Error:r.error,Float32Array:r.arrayBuffer,Float64Array:r.arrayBuffer,Int8Array:r.arrayBuffer,Int16Array:r.arrayBuffer,Int32Array:r.arrayBuffer,Map:r.map,Number:m,Object:r.object,Promise:s,RegExp:r.regExp,Set:r.set,String:m,WeakMap:s,WeakSet:s,Uint8Array:r.arrayBuffer,Uint8ClampedArray:r.arrayBuffer,Uint16Array:r.arrayBuffer,Uint32Array:r.arrayBuffer,Uint64Array:r.arrayBuffer}}function I(r){var e=b({},E,r),t=Ar(e),c=t.Array,a=t.Object;function u(o,n){if(n.prototype=n.Constructor=void 0,!o||typeof o!="object")return o;if(n.cache.has(o))return n.cache.get(o);if(n.prototype=br(o),n.Constructor=n.prototype&&n.prototype.constructor,!n.Constructor||n.Constructor===Object)return a(o,n);if(Cr(o))return c(o,n);var f=t[nr(o)];return f?f(o,n):typeof o.then=="function"?o:a(o,n)}return function(n){return u(n,{Constructor:void 0,cache:Z(),copier:u,prototype:void 0})}}function Pr(r){return I(b({},wr,r))}Pr({});var A=I({});function Br(r){const e=z(r.initialState),t=g(()=>r.steps.map((i,p)=>({...i,id:p}))),c=J(),a=g(()=>t.value.length),u=g(()=>{var p;const i=(p=t.value.find(V=>V.to===c.currentRoute.value.path))==null?void 0:p.id;return typeof i!="number"?0:i>-1?i:0}),o=g(()=>(u.value+1)/a.value*100),n=y(A(e.value)),f=y(!1),w=y(!1),S=y(!1),x=y(!0),l={steps:t,totalSteps:a,currentStep:u,progress:o,data:n,nextNotOk:x,loading:f,preview:w,complete:S,getStep:O,getNextStep:D,getPrevStep:U,goToStep:N,reset:k,handleSubmit:W};function D(){return u.value+1>=a.value?null:O(u.value+1)}function U(){return u.value-1<0?null:O(u.value-1)}function O(i){return t.value[i]}function N(i){i&&c.push(i.to)}function k(){n.value=A(e.value),w.value=!1,S.value=!1}async function W(){if(!f.value){f.value=!0;try{r.onSubmit&&await r.onSubmit(n.value,l),S.value=!0}catch(i){r.onError&&await r.onError(i,l)}finally{f.value=!1}}}return K(R,l),l}const R=Symbol("multi-step-form-context");function jr(){const r=X(R);if(!r)throw new Error("MultiStepForm: no context found, did you forget to call createMultiStepForm?");return r}export{Br as c,jr as u};
