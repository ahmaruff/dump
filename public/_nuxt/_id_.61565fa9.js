import{d as A,r as d,D,ag as K,P as E,a4 as b,a2 as j,o as u,a as c,b as e,e as r,ap as _,at as B,K as P,L as S,w,g as M,y as C,v as N,au as h,l as H,f as R,Y as L,Z as O,M as J,_ as Y,$ as Z}from"./entry.95308f2b.js";import{_ as q}from"./BaseButtonIcon.vue.ada84bdf.js";import{_ as G}from"./BaseInputFileHeadless.vue.e3884c55.js";import{_ as Q}from"./BaseTextarea.vue.793866e0.js";import"./file-preview.6f09b0bf.js";const t=k=>(L("data-v-e097f396"),k=k(),O(),k),W=t(()=>e("div",{class:"flex w-full flex-wrap items-center justify-between px-3 ml-5 -mt-16"},[e("h1",{class:"mb-2 mt-0 text-2xl font-medium leading-tight text-black"}," Edit Produk ")],-1)),X=["action"],ee={class:"border-muted-200"},te={class:"nui-card nui-card-rounded-sm nui-card-default"},ne={class:"bg-white dark:bg-muted-800/70 p-10"},se=t(()=>e("div",{class:"mb-2"},[e("h3",{class:"nui-heading nui-heading-md nui-weight-medium nui-lead-normal"}," Informasi Produk "),e("span",{class:"nui-text nui-content-xs nui-weight-normal nui-lead-normal text-muted-400"}," Ini adalah informasi yang pertama ditampilkan untuk pelanggan ")],-1)),ie={class:"col-span-12 mt-6"},oe={class:"col-span-12"},ae={class:"col-span-12 sm:col-span-6 mt-6"},le={class:"flex w-full flex-col gap-4 sm:flex-row"},de={class:"relative grow"},ue={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},ce=t(()=>e("label",{class:"nui-input-label",for:"nui-input-f39c7d2d-067e-400e-ac21-d2292df2f668"},"Kategori",-1)),re={class:"nui-select-wrapper nui-select-default nui-select-md nui-select-rounded-sm"},pe=t(()=>e("option",{value:null},"Pilih Kategori",-1)),me=["value"],_e=t(()=>e("div",{class:"nui-select-chevron nui-chevron border-unset"},[e("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",class:"nui-select-chevron-inner"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m6 9 6 6 6-6"})])],-1)),he=t(()=>e("div",{class:"vc-popover-content-wrapper is-interactive"},null,-1)),ve=t(()=>e("br",null,null,-1)),fe={class:"border-muted-200"},ge={class:"nui-card nui-card-rounded-sm nui-card-default"},be={class:"bg-white dark:bg-muted-800/70 p-10"},we=t(()=>e("div",{class:"mb-2"},[e("h3",{class:"nui-heading nui-heading-md nui-weight-medium nui-lead-normal"}," Detail Produk "),e("span",{class:"nui-text nui-content-xs nui-weight-normal nui-lead-normal text-muted-400"}," Ini adalah informasi yang pertama ditampilkan untuk pelanggan ")],-1)),ke={class:"col-span-2"},xe={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},ye=t(()=>e("label",{class:"nui-input-label",for:"nui-input-89b0cb01-2c29-4d47-9e2d-2a62d6ead7cf"},"Foto Produk",-1)),Ve={class:"flex items-center w-auto"},Pe={class:"relative size-20"},Ce=["src"],Ie=["src"],Ue={key:2,class:"kotak-dotted"},je=t(()=>e("img",{src:"https://res.cloudinary.com/daraki09f/image/upload/v1715845355/waktoo-commerce/icon-foto.svg"},null,-1)),Be=t(()=>e("br",null,null,-1)),Se={key:3,class:"absolute bottom-0 end-0 z-20"},$e={key:4,class:"absolute bottom-0 end-0 z-20"},Fe={class:"relative","data-nui-tooltip":"Upload image"},ze={class:"col-span-12 sm:col-span-6 mt-6"},Te={class:"flex w-full flex-col gap-4 sm:flex-row"},Ae={class:"relative grow"},De={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},Ke=t(()=>e("label",{class:"nui-input-label",for:"nui-input-f39c7d2d-067e-400e-ac21-d2292df2f668"},"Kondisi",-1)),Ee={class:"nui-select-wrapper nui-select-default nui-select-md nui-select-rounded-sm"},Me=t(()=>e("option",{value:null},"Pilih Kondisi",-1)),Ne=t(()=>e("option",{value:"1"},"baru",-1)),He=t(()=>e("option",{value:"0"},"bekas",-1)),Re=[Me,Ne,He],Le=t(()=>e("div",{class:"nui-select-chevron nui-chevron"},[e("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",class:"nui-select-chevron-inner"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m6 9 6 6 6-6"})])],-1)),Oe={class:"relative grow"},Je={class:"col-span-6"},Ye=t(()=>e("div",{class:"vc-popover-content-wrapper is-interactive"},null,-1)),Ze={class:"col-span-12 sm:col-span-6 mt-6"},qe={class:"col-span-12"},Ge=t(()=>e("br",null,null,-1)),Qe={class:"border-muted-200"},We={class:"nui-card nui-card-rounded-sm nui-card-default"},Xe={class:"bg-white dark:bg-muted-800/70 p-10"},et={class:"mb-2"},tt=t(()=>e("h3",{class:"nui-heading nui-heading-md nui-weight-medium nui-lead-normal"}," Varian Produk ",-1)),nt=t(()=>e("span",{class:"nui-text nui-content-xs nui-weight-normal nui-lead-normal text-muted-400"}," tambah varian agar pembeli dapat memilih produk yang sesuai ",-1)),st={key:0,class:"col-span-12 sm:col-span-6 mt-6"},it=J('<div class="flex w-1/2 flex-col gap-4 sm:flex-row" data-v-e097f396><div class="relative grow" data-v-e097f396><div class="nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon" data-v-e097f396><label class="nui-input-label" for="nui-input-f39c7d2d-067e-400e-ac21-d2292df2f668" data-v-e097f396>Kondisi</label><div class="nui-select-wrapper nui-select-default nui-select-md nui-select-rounded-sm" data-v-e097f396><div data-v-e097f396><select class="nui-select" id="nui-input-fa27fa71-0023-45d5-ac67-2b807f99916e" data-v-e097f396><option value="" hidden="" data-v-e097f396>Pilih Opsi</option><option value="baru" data-v-e097f396>baru</option><option value="bekas" data-v-e097f396>bekas</option></select><div class="nui-select-chevron nui-chevron" data-v-e097f396><svg aria-hidden="true" viewBox="0 0 24 24" class="nui-select-chevron-inner" data-v-e097f396><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m6 9 6 6 6-6" data-v-e097f396></path></svg></div></div></div></div></div></div><div class="vc-popover-content-wrapper is-interactive" data-v-e097f396></div>',2),ot=[it],at=t(()=>e("br",null,null,-1)),lt={class:"border-muted-200"},dt={class:"nui-card nui-card-rounded-sm nui-card-default"},ut={class:"bg-white dark:bg-muted-800/70 p-10"},ct=t(()=>e("div",{class:"mb-2"},[e("h3",{class:"nui-heading nui-heading-md nui-weight-medium nui-lead-normal"}," Harga "),e("span",{class:"nui-text nui-content-xs nui-weight-normal nui-lead-normal text-muted-400"}," ini adalah informasi yang pertama ditampilkan untuk pelanggan ")],-1)),rt={class:"col-span-12 sm:col-span-6 mt-6"},pt={class:"flex w-full flex-col gap-4 sm:flex-row"},mt={class:"relative grow"},_t={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},ht=t(()=>e("label",{class:"nui-input-label",for:"nui-input-88972005-df30-4290-8090-d7a6fff8b790"},"Minimal Pemesanan",-1)),vt={class:"nui-input-outer"},ft={class:"relative grow"},gt={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},bt=t(()=>e("label",{class:"nui-input-label",for:"nui-input-88972005-df30-4290-8090-d7a6fff8b790"},"Harga Satuan",-1)),wt={class:"nui-input-outer"},kt=t(()=>e("div",{class:"vc-popover-content-wrapper is-interactive"},null,-1)),xt=t(()=>e("br",null,null,-1)),yt={class:"border-muted-200"},Vt={class:"nui-card nui-card-rounded-sm nui-card-default"},Pt={class:"bg-white dark:bg-muted-800/70 p-10"},Ct=t(()=>e("div",{class:"mb-2"},[e("h3",{class:"nui-heading nui-heading-md nui-weight-medium nui-lead-normal"}," Pengelolaan Produk "),e("span",{class:"nui-text nui-content-xs nui-weight-normal nui-lead-normal text-muted-400"}," ini adalah informasi yang pertama ditampilkan untuk pelanggan ")],-1)),It={class:"col-span-12 sm:col-span-6 mt-6"},Ut={class:"flex w-full flex-col gap-4 sm:flex-row"},jt={class:"relative grow"},Bt={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},St=t(()=>e("label",{class:"nui-input-label",for:"nui-input-88972005-df30-4290-8090-d7a6fff8b790"},"Stok Produk",-1)),$t={class:"nui-input-outer"},Ft=t(()=>e("div",{class:"vc-popover-content-wrapper is-interactive"},null,-1)),zt=t(()=>e("br",null,null,-1)),Tt={class:"border-muted-200"},At={class:"nui-card nui-card-rounded-sm nui-card-default"},Dt={class:"bg-white dark:bg-muted-800/70 p-10"},Kt=t(()=>e("div",{class:"mb-2"},[e("h3",{class:"nui-heading nui-heading-md nui-weight-medium nui-lead-normal"}," Berat & Pengiriman "),e("span",{class:"nui-text nui-content-xs nui-weight-normal nui-lead-normal text-muted-400"}," ini adalah informasi yang pertama ditampilkan untuk pelanggan ")],-1)),Et={class:"col-span-12 sm:col-span-6 mt-6"},Mt={class:"flex w-full flex-col gap-4 sm:flex-row"},Nt={class:"relative grow"},Ht={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},Rt=t(()=>e("label",{class:"nui-input-label",for:"nui-input-88972005-df30-4290-8090-d7a6fff8b790"},"Berat Produk",-1)),Lt={class:"nui-input-outer"},Ot=t(()=>e("div",{class:"relative grow"},null,-1)),Jt={class:"flex w-full flex-col gap-4 sm:flex-row"},Yt={class:"relative grow"},Zt={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},qt=t(()=>e("label",{class:"nui-input-label",for:"nui-input-88972005-df30-4290-8090-d7a6fff8b790"},"Ukuran Produk",-1)),Gt={class:"nui-input-outer"},Qt={class:"relative grow"},Wt={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},Xt=t(()=>e("label",{class:"nui-input-label",for:"nui-input-88972005-df30-4290-8090-d7a6fff8b790"},null,-1)),en={class:"nui-input-outer"},tn={class:"relative grow"},nn={class:"nui-input-wrapper nui-input-default nui-input-md nui-input-rounded-sm nui-has-icon"},sn=t(()=>e("label",{class:"nui-input-label",for:"nui-input-88972005-df30-4290-8090-d7a6fff8b790"},null,-1)),on={class:"nui-input-outer"},an=t(()=>e("div",{class:"relative grow"},null,-1)),ln=t(()=>e("div",{class:"vc-popover-content-wrapper is-interactive"},null,-1)),dn=t(()=>e("br",null,null,-1)),un=t(()=>e("div",{class:"text-center md:col-span-5"},[e("div",{class:"-mt-4 inline-flex w-full items-center justify-center gap-2 sm:w-auto"},[e("button",{type:"button",rel:"",target:"",class:"nui-button nui-button-md nui-button-rounded-sm nui-button-solid nui-button-default !h-12 w-full sm:w-40"}," Cancel "),e("button",{type:"submit",rel:"",target:"",class:"nui-button nui-button-md nui-button-rounded-sm nui-button-solid nui-button-primary !h-12 w-full sm:w-40"}," Submit ")])],-1)),cn=A({__name:"[id]",setup(k){const I=d([]);d(null),d([]);const $=d([]);d(null),d([]),d(Array(10).fill(null)),d(Array(10).fill(null)),d([]);const i=D({name:"",description:"",stock:"",price:"",min_order:"",weight:"",length:"",width:"",height:"",is_active:!0,product_category_id:"",images:[]}),x=d(Array(10).fill(null)),U=K(),F=async()=>{try{const o=localStorage.getItem("token");if(!o){console.error("Token not found");return}const s={...i},a=U.params.id,p=await b(`https://api.dev.commerce.waktoo.com:443/api/product-data/${a}`).headers({Authorization:`Bearer ${o}`,"Content-Type":"application/json"}).put(s).json();if(p.status==="success"){const l=[];console.log("images awal",i?.images),console.log("images semua",x.value);const v=new FormData;if(x.value.forEach((m,f)=>{if(m){if(i.images[f]){const n=i.images[f].substring(59);l.push(n)}v.append("images[]",m[0])}}),console.log("Save Images:",v),l.length>0){const m=await b(`https://api.dev.commerce.waktoo.com:443/api/files/product-images/${a}`).headers({Authorization:`Bearer ${o}`,"Content-Type":"application/json"}).json({path:l}).delete().res();if(!m.ok){const f=await m.json();throw new Error(f.message||"Failed to delete images")}}const y=await fetch(`https://api.dev.commerce.waktoo.com:443/api/files/product-images/${a}`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:v});if(!y.ok){const m=await y.json();throw new Error(m.message||"Failed to upload images")}console.log("Images updated successfully")}else console.error("Failed to save product:",p.error)}catch(o){console.error("Error:",o)}};return E(async()=>{const o=localStorage.getItem("token");if(o)try{const s=U.params.id,[a,p,l]=await Promise.all([b("https://api.dev.commerce.waktoo.com:443/api/product-categories").headers({Authorization:`Bearer ${o}`,"Content-Type":"application/json"}).get().json(),b("https://api.dev.commerce.waktoo.com:443/api/product-showcase").headers({Authorization:`Bearer ${o}`,"Content-Type":"application/json"}).get().json(),b(`https://api.dev.commerce.waktoo.com:443/api/product-data/${s}`).headers({Authorization:`Bearer ${o}`,"Content-Type":"application/json"}).get().json()]);a&&a.status==="success"?I.value=a.data.product_category:console.error("Failed to fetch data from product-categories API:",a),p&&p.status==="success"?$.value=p.data.showcase:console.error("Failed to fetch data from product-showcase API:",p),l&&l.status==="success"?Object.assign(i,l.data.product_data):console.error("Failed to fetch data from product-data API:",l)}catch(s){console.error("Error:",s)}}),(o,s)=>{const a=H,p=j("center"),l=Y,v=q,y=G,m=Q,f=j("Field");return u(),c(P,null,[W,e("form",{onSubmit:F,action:`/shop-admin/${i?.id}`,class:"mx-auto w-full"},[e("div",ee,[e("div",te,[e("div",ne,[se,e("div",ie,[e("div",oe,[r(a,{label:"Nama Produk",placeholder:"Contoh: Jenis/Kategori Produk + Merek + Keterangan",modelValue:i.name,"onUpdate:modelValue":s[0]||(s[0]=n=>i.name=n)},null,8,["modelValue"])])]),e("div",ae,[e("div",le,[e("div",de,[e("div",ue,[ce,e("div",re,[e("div",null,[_(e("select",{"onUpdate:modelValue":s[1]||(s[1]=n=>o.selectedCategoryId=n),class:"nui-select nui-select border-unset",id:"nui-input-fa27fa71-0023-45d5-ac67-2b807f99916e"},[pe,(u(!0),c(P,null,S(I.value,n=>(u(),c("option",{key:n.id,value:n.product_id},C(n.name),9,me))),128))],512),[[B,o.selectedCategoryId]]),_e])])])])]),he])])])]),ve,e("div",fe,[e("div",ge,[e("div",be,[we,e("div",ke,[e("div",xe,[ye,e("div",Ve,[(u(),c(P,null,S(10,n=>e("div",{key:n,class:"photo-upload-item"},[r(y,{modelValue:x.value[n-1],"onUpdate:modelValue":V=>x.value[n-1]=V,accept:"image/*"},{default:w(({open:V,remove:z,preview:T,files:g})=>[e("div",Pe,[g?.length&&g.item(0)?(u(),c("img",{key:0,src:T(g.item(0)).value,alt:"Upload preview",class:"img-close-foto"},null,8,Ce)):i?.images[n-1]?(u(),c("img",{key:1,src:i?.images[n-1],alt:"Upload preview",class:"img-close-foto"},null,8,Ie)):(u(),c("div",Ue,[r(p,null,{default:w(()=>[je]),_:1}),Be,R(" "+C(n===1?"Foto Utama":"Foto Ke - "+n),1)])),g?.length&&g.item(0)?(u(),c("div",Se,[r(v,{size:"sm",rounded:"full","data-nui-tooltip":"Remove image",class:"scale-90",onClick:rn=>z(g.item(0))},{default:w(()=>[r(l,{name:"lucide:x",class:"size-4"})]),_:2},1032,["onClick"])])):(u(),c("div",$e,[e("div",Fe,[r(v,{size:"sm",rounded:"full",class:"button-foto",onClick:V},{default:w(()=>[r(l,{name:"lucide:plus",class:"size-4"})]),_:2},1032,["onClick"])])]))])]),_:2},1032,["modelValue","onUpdate:modelValue"])])),64))])])]),e("div",ze,[e("div",Te,[e("div",Ae,[e("div",De,[Ke,e("div",Ee,[e("div",null,[_(e("select",{class:"nui-select border-unset",id:"nui-input-fa27fa71-0023-45d5-ac67-2b807f99916e","onUpdate:modelValue":s[2]||(s[2]=n=>i.condition=n)},Re,512),[[B,i.condition]]),Le])])])]),e("div",Oe,[e("div",Je,[r(a,{label:"Url Video Produk",placeholder:"Contoh: www.commerce.com",modelValue:i.video_url,"onUpdate:modelValue":s[3]||(s[3]=n=>i.video_url=n)},null,8,["modelValue"])])])]),Ye]),e("div",Ze,[e("div",qe,[r(f,{name:"event.longDesc"},{default:w(()=>[r(m,{label:"Deskripsi Produk",shape:"curved",placeholder:"Tuliskan detail Produk...",rows:"4",modelValue:i.description,"onUpdate:modelValue":s[4]||(s[4]=n=>i.description=n)},null,8,["modelValue"])]),_:1})])])])])]),Ge,e("div",Qe,[e("div",We,[e("div",Xe,[e("div",et,[tt,nt,e("button",{onClick:s[5]||(s[5]=M((...n)=>o.toggleSelect&&o.toggleSelect(...n),["prevent"])),class:"nui-button nui-button-small nui-button-rounded nui-button-solid float-right"},C(o.showSelect?"Hapus Varian":"Tambah Varian"),1)]),o.showSelect?(u(),c("div",st,ot)):N("",!0)])])]),at,e("div",lt,[e("div",dt,[e("div",ut,[ct,e("div",rt,[e("div",pt,[e("div",mt,[e("div",_t,[ht,e("div",vt,[e("div",null,[_(e("input",{type:"number",class:"nui-input",placeholder:"Contoh: 1",id:"nui-input-b8352d51-a953-4d0e-b5cf-22b183531ed0","onUpdate:modelValue":s[6]||(s[6]=n=>i.min_order=n)},null,512),[[h,i.min_order]])])])])]),e("div",ft,[e("div",gt,[bt,e("div",wt,[e("div",null,[_(e("input",{type:"number",class:"nui-input",placeholder:"Rp. ",id:"nui-input-b8352d51-a953-4d0e-b5cf-22b183531ed0","onUpdate:modelValue":s[7]||(s[7]=n=>i.price=n)},null,512),[[h,i.price]])])])])])]),kt])])])]),xt,e("div",yt,[e("div",Vt,[e("div",Pt,[Ct,e("div",It,[e("div",Ut,[e("div",jt,[e("div",Bt,[St,e("div",$t,[e("div",null,[_(e("input",{type:"number",class:"nui-input",placeholder:"Contoh: 1",id:"nui-input-b8352d51-a953-4d0e-b5cf-22b183531ed0","onUpdate:modelValue":s[8]||(s[8]=n=>i.stock=n)},null,512),[[h,i.stock]])])])])])]),Ft])])])]),zt,e("div",Tt,[e("div",At,[e("div",Dt,[Kt,e("div",Et,[e("div",Mt,[e("div",Nt,[e("div",Ht,[Rt,e("div",Lt,[e("div",null,[_(e("input",{type:"number",class:"nui-input",placeholder:"Contoh: 1",id:"nui-input-b8352d51-a953-4d0e-b5cf-22b183531ed0","onUpdate:modelValue":s[9]||(s[9]=n=>i.weight=n)},null,512),[[h,i.weight]])])])])]),Ot]),e("div",Jt,[e("div",Yt,[e("div",Zt,[qt,e("div",Gt,[e("div",null,[_(e("input",{type:"number",class:"nui-input",placeholder:"Panjang",id:"nui-input-b8352d51-a953-4d0e-b5cf-22b183531ed0","onUpdate:modelValue":s[10]||(s[10]=n=>i.length=n)},null,512),[[h,i.length]])])])])]),e("div",Qt,[e("div",Wt,[Xt,e("div",en,[e("div",null,[_(e("input",{type:"number",class:"nui-input",placeholder:"Tinggi",id:"nui-input-b8352d51-a953-4d0e-b5cf-22b183531ed0","onUpdate:modelValue":s[11]||(s[11]=n=>i.height=n)},null,512),[[h,i.height]])])])])]),e("div",tn,[e("div",nn,[sn,e("div",on,[e("div",null,[_(e("input",{type:"number",class:"nui-input",placeholder:"Lebar",id:"nui-input-b8352d51-a953-4d0e-b5cf-22b183531ed0","onUpdate:modelValue":s[12]||(s[12]=n=>i.width=n)},null,512),[[h,i.width]])])])])]),an]),ln])])])]),dn,un],40,X)],64)}}});const fn=Z(cn,[["__scopeId","data-v-e097f396"]]);export{fn as default};
