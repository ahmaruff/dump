import{_ as ve}from"./DKAPklYH.js";import{d as Z,I as q,J as X,o,e as n,K as he,n as _e,l as ge,r as p,L as ne,g as e,h as l,M as Y,i as C,m as U,G,F as A,k as x,t as S,j as J,B as ue,y as ie,z as de,A as re,N as be,O as ke,E as le,f as Q,b as Ve,c as te,q as fe,H as se,_ as ye}from"./DmTmMO_-.js";import{_ as we}from"./21j5a1Cb.js";import{_ as ce}from"./C_jKOqdG.js";import{_ as me}from"./Wwwchkvl.js";import{_ as $e,a as Ue}from"./COXD0Gwp.js";import{_ as Se}from"./CK18j4Hi.js";import{_ as Ce}from"./BaWAYAlg.js";import{_ as Ie}from"./B4A7ptYP.js";import{u as Pe}from"./BHLlrkjG.js";import{u as Te}from"./BCX54yQo.js";import"./D7JqdvHr.js";import"./C100mYQ1.js";import"./DzMF6t2X.js";import"./CSxYk3-N.js";import"./DLP8OW-a.js";import"./C5pBaPI_.js";const Be=Z({__name:"BaseTag",props:{shadow:{default:void 0},color:{default:void 0},rounded:{default:void 0},size:{default:void 0},variant:{default:void 0}},setup(D){const i=D,v=q(i,"BaseTag","color"),_=q(i,"BaseTag","rounded"),I=q(i,"BaseTag","size"),g=q(i,"BaseTag","variant"),k={solid:"nui-tag-solid",pastel:"nui-tag-pastel",outline:"nui-tag-outline"},N={none:"",sm:"nui-tag-rounded-sm",md:"nui-tag-rounded-md",lg:"nui-tag-rounded-lg",full:"nui-tag-rounded-full"},j={default:"nui-tag-default","default-contrast":"nui-tag-default-contrast",muted:"nui-tag-muted","muted-contrast":"nui-tag-muted-contrast",light:"nui-tag-light",dark:"nui-tag-dark",black:"nui-tag-black",primary:"nui-tag-primary",info:"nui-tag-info",success:"nui-tag-success",warning:"nui-tag-warning",danger:"nui-tag-danger"},s={sm:"nui-tag-sm",md:"nui-tag-md"},T={flat:"nui-tag-shadow",hover:"nui-tag-shadow-hover"},w=X(()=>["nui-tag",I.value&&s[I.value],_.value&&N[_.value],g.value&&k[g.value],v.value&&j[v.value],i.shadow&&T[i.shadow]]);return($,P)=>(o(),n("span",{class:_e(ge(w))},[he($.$slots,"default")],2))}}),f=D=>(ie("data-v-0cfa93fc"),D=D(),de(),D),De={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},je={class:"line-height-normal"},ze=f(()=>e("span",{class:"title-m-3"},"Nama Varian",-1)),Ne=f(()=>e("br",null,null,-1)),Oe={class:"flex"},Ae=f(()=>e("br",null,null,-1)),Fe={class:"flex"},xe=f(()=>e("br",null,null,-1)),Ke=f(()=>e("option",{disabled:"",value:""},"Pilih sebuah opsi",-1)),Re=["value"],Je=["onClick"],He={class:"line-height-normal"},We=f(()=>e("span",{class:"title-m-3"},"Nama Varian 2",-1)),Ee=f(()=>e("br",null,null,-1)),Ge={class:"flex"},Le=f(()=>e("br",null,null,-1)),Me={class:"flex"},qe=f(()=>e("br",null,null,-1)),Ye=f(()=>e("option",{disabled:"",value:""},"Pilih sebuah opsi",-1)),Qe=["value"],Xe=["onClick"],Ze={class:"mb-2"},ea=f(()=>e("h3",{class:"nui-heading nui-heading-md nui-weight-medium nui-lead-normal"}," Varian Produk ",-1)),aa=f(()=>e("span",{class:"nui-text nui-content-xs nui-weight-normal nui-lead-normal text-muted-400"}," Tambah varian agar pembeli dapat memilih produk yang sesuai ",-1)),la=f(()=>e("br",null,null,-1)),ta={key:0},oa=f(()=>e("th",null,"Harga",-1)),sa=f(()=>e("th",null,"Stock",-1)),na=f(()=>e("th",null,"SKU",-1)),ua={key:1},ia=f(()=>e("th",null,"Harga",-1)),da=f(()=>e("th",null,"Stock",-1)),ra=f(()=>e("th",null,"SKU",-1)),ca={key:0},ma={key:1},pa=Z({__name:"TagSelector",setup(D){const i=p(""),v=p(""),_=p([]),I=p([]),g=p([]),k=p([]),N=p(""),j=p(""),s=p(""),T=p(""),w=p([]),$=p([]),P=p([]),K=p([]);(()=>{for(let h=0;h<g.length;h++)K.value.push(!0)})();const ee=()=>{i.value&&!_.value.includes(i.value)&&(_.value.push(i.value),i.value="")},ae=()=>{v.value&&!I.value.includes(v.value)&&(I.value.push(v.value),v.value="")},L=X(()=>{const h=[];return g.value.forEach(u=>{k.value.forEach(c=>{h.push({variant_1:u,variant_2:c})})}),h});ne([g,k,w,$,P,K],()=>{if(v.value){const h={variant_1:{name:i.value,options:_.value},variant_2:{name:v.value,options:I.value},variant_combination:L.value.map((u,c)=>({name:`${u.variant_1} - ${u.variant_2}`,variant_1:u.variant_1,variant_2:u.variant_2,description:null,images:null,sku:P.value[c]||null,stock:$.value[c]||0,price:w.value[c]||0,is_active:K.value[c]||!0}))};sessionStorage.setItem("productData",JSON.stringify(h))}else{const h={variant_1:{name:i.value,options:_.value},variant_2:{name:null,options:null},variant_combination:g.value.map((u,c)=>({name:u,variant_1:u,variant_2:null,description:null,images:null,sku:P.value[c]||null,stock:$.value[c]||0,price:w.value[c]||0,is_active:K.value[c]||!0}))};sessionStorage.setItem("productData",JSON.stringify(h))}},{immediate:!0,deep:!0});const t=()=>{N.value&&!_.value.includes(N.value)&&(_.value.push(N.value),N.value="")},B=()=>{j.value&&!g.value.includes(j.value)&&(g.value.push(j.value),w.value.push(0),$.value.push(0),j.value="")},z=()=>{s.value&&!I.value.includes(s.value)&&(I.value.push(s.value),s.value="")},H=()=>{T.value&&!k.value.includes(T.value)&&(k.value.push(T.value),w.value.push(0),$.value.push(0),T.value="")},V=h=>{g.value.splice(h,1),w.value.splice(h,1),$.value.splice(h,1)},W=h=>{k.value.splice(h,1)};return(()=>{const h=sessionStorage.getItem("productData");if(h){const u=JSON.parse(h);i.value=u.variant_1.name,v.value=u.variant_2.name,_.value=u.variant_1.options,I.value=u.variant_2.options||[],u.variant_combination.forEach(O=>{g.value.push(O.variant_1),k.value.push(O.variant_2),w.value.push(O.price),$.value.push(O.stock),P.value.push(O.sku),K.value.push(O.is_active)})}})(),(h,u)=>{const c=ce,O=ue,E=me,M=Be;return o(),n(A,null,[e("div",De,[e("div",je,[ze,Ne,e("div",Oe,[l(c,{modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=d=>i.value=d),onKeyup:Y(ee,["enter"]),placeholder:"Tambahkan Varian baru,Contoh: warna",class:"mr-2"},null,8,["modelValue"])]),Ae,e("div",Fe,[l(c,{modelValue:N.value,"onUpdate:modelValue":u[1]||(u[1]=d=>N.value=d),onKeyup:Y(t,["enter"]),placeholder:"Tambahkan opsi baru",class:"mr-2"},null,8,["modelValue"]),l(O,{onClick:G(t,["prevent"])},{default:C(()=>[U("Tambah Opsi")]),_:1})]),xe,l(E,{modelValue:j.value,"onUpdate:modelValue":u[2]||(u[2]=d=>j.value=d),onChange:B},{default:C(()=>[Ke,(o(!0),n(A,null,x(_.value,d=>(o(),n("option",{key:d,value:d},S(d),9,Re))),128))]),_:1},8,["modelValue"]),e("div",null,[(o(!0),n(A,null,x(g.value,(d,a)=>(o(),n("span",{key:a,class:"tag"},[l(M,null,{default:C(()=>[U(S(d),1)]),_:2},1024),e("button",{onClick:y=>V(a)},"x",8,Je)]))),128))])]),e("div",He,[We,Ee,e("div",Ge,[l(c,{modelValue:v.value,"onUpdate:modelValue":u[3]||(u[3]=d=>v.value=d),onKeyup:Y(ae,["enter"]),placeholder:"Tambahkan Varian 2 baru,Contoh: ukuran",class:"mr-2"},null,8,["modelValue"])]),Le,e("div",Me,[l(c,{modelValue:s.value,"onUpdate:modelValue":u[4]||(u[4]=d=>s.value=d),onKeyup:Y(z,["enter"]),placeholder:"Tambahkan opsi baru",class:"mr-2"},null,8,["modelValue"]),l(O,{onClick:G(z,["prevent"])},{default:C(()=>[U("Tambah Opsi")]),_:1})]),qe,l(E,{modelValue:T.value,"onUpdate:modelValue":u[5]||(u[5]=d=>T.value=d),onChange:H},{default:C(()=>[Ye,(o(!0),n(A,null,x(I.value,d=>(o(),n("option",{key:d,value:d},S(d),9,Qe))),128))]),_:1},8,["modelValue"]),e("div",null,[(o(!0),n(A,null,x(k.value,(d,a)=>(o(),n("span",{key:a,class:"tag"},[l(M,null,{default:C(()=>[U(S(d),1)]),_:2},1024),e("button",{onClick:y=>W(a)},"x",8,Xe)]))),128))])])]),e("div",Ze,[ea,aa,la,e("table",null,[e("thead",null,[g.value.length>0&&k.value.length===0||i.value&&!v.value?(o(),n("tr",ta,[e("th",null,S(i.value),1),oa,sa,na])):g.value.length>0&&k.value.length>0||i.value&&v.value?(o(),n("tr",ua,[e("th",null,S(i.value),1),e("th",null,S(v.value),1),ia,da,ra])):J("",!0)]),g.value.length>0&&k.value.length===0||i.value&&!v.value?(o(),n("tbody",ca,[(o(!0),n(A,null,x(g.value,(d,a)=>(o(),n("tr",{key:"tag-"+a},[e("td",null,S(d),1),e("td",null,[l(c,{modelValue:w.value[a],"onUpdate:modelValue":y=>w.value[a]=y,placeholder:"Contoh: ",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,[l(c,{modelValue:$.value[a],"onUpdate:modelValue":y=>$.value[a]=y,placeholder:"Contoh: ",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,[l(c,{modelValue:P.value[a],"onUpdate:modelValue":y=>P.value[a]=y,placeholder:"Contoh: ",type:"text"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])):g.value.length>0&&k.value.length>0||i.value&&v.value?(o(),n("tbody",ma,[(o(!0),n(A,null,x(L.value,(d,a)=>(o(),n("tr",{key:"combination-"+a},[e("td",null,S(d.variant_1),1),e("td",null,S(d.variant_2),1),e("td",null,[l(c,{modelValue:w.value[a],"onUpdate:modelValue":y=>w.value[a]=y,placeholder:"Contoh: ",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,[l(c,{modelValue:$.value[a],"onUpdate:modelValue":y=>$.value[a]=y,placeholder:"Contoh: ",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,[l(c,{modelValue:P.value[a],"onUpdate:modelValue":y=>P.value[a]=y,placeholder:"Contoh: ",type:"text"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])):J("",!0)])])],64)}}}),va=re(pa,[["__scopeId","data-v-0cfa93fc"]]),r=D=>(ie("data-v-8f4948c2"),D=D(),de(),D),ha={class:"mb-2"},_a={class:"border-muted-200"},ga={class:"nui-card nui-card-rounded-sm nui-card-default"},ba={class:"bg-white dark:bg-muted-800/70 p-10"},ka={class:"mb-2"},Va=r(()=>e("div",{class:"mlls"},[e("div",{class:"title-m-1"},"Informasi Produk"),e("div",{class:"title-m-2"},"Ini adalah informasi yang pertama ditampilkan untuk pelanggan")],-1)),fa={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},ya=r(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Nama Produk"),U(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Nama produk minimal mempunyai 40 karakter dengan memasukkan merek, jenis produk, warna, bahan, atau tipe.")],-1)),wa={class:"line-height-normal"},$a={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Ua=r(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Kategori"),U(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Pilih kategori yang sesuai dengan produk. Pemilihan kategori yang tepat akan mempermudah barang untuk dicari oleh pembeli.")],-1)),Sa={class:"line-height-normal"},Ca=r(()=>e("option",{value:null},"Pilih Kategori",-1)),Ia=["value"],Pa={key:0},Ta={class:"line-height-normal"},Ba={class:"title-m-3"},Da={key:0,class:"alert-red"},ja=r(()=>e("br",null,null,-1)),za={class:"line-height-normal"},Na=["value"],Oa=r(()=>e("br",null,null,-1)),Aa={class:"border-muted-200"},Fa={class:"nui-card nui-card-rounded-sm nui-card-default"},xa={class:"bg-white dark:bg-muted-800/70 p-10"},Ka={class:"mb-2"},Ra=r(()=>e("div",{class:"mlls"},[e("div",{class:"title-m-1"},"Detail Produk"),e("div",{class:"title-m-2"},"Ini adalah informasi yang pertama ditampilkan untuk pelanggan")],-1)),Ja={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Ha=r(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Foto Produk"),U(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},[U("Wajib menambahkan minimal 1 dari 10 foto produk."),e("br"),U("Format foto harus jpg jpeg ong dan mempunyai ukuran minimal 300 × 300 px (untuk gambar optimal, gunakan ukuran min. 1.200 x 1.200 px).")])],-1)),Wa={class:"line-height-normal"},Ea={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4"},Ga={class:"relative size-20"},La=["src"],Ma={key:1,class:"kotak-dotted"},qa=r(()=>e("img",{src:"https://res.cloudinary.com/daraki09f/image/upload/v1715845355/waktoo-commerce/icon-foto.svg"},null,-1)),Ya=r(()=>e("br",null,null,-1)),Qa={key:2,class:"absolute bottom-0 end-0 z-20"},Xa={key:3,class:"absolute bottom-0 end-0 z-20"},Za={class:"relative","data-nui-tooltip":"Upload image"},el={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},al=fe('<div class="line-height-normal" data-v-8f4948c2><span class="title-m-3" data-v-8f4948c2>URL Video Produk</span><br data-v-8f4948c2><span class="title-m-2" data-v-8f4948c2>Tambah video agar pembeli semakin tertarik dengan produkmu.</span><br data-v-8f4948c2><span class="title-m-2" data-v-8f4948c2>Hanya dapat menambahkan video yang berasal dari sosial media yang</span><span class="title-m-2" data-v-8f4948c2>dapat diakses oleh publik.</span></div>',1),ll={class:"line-height-normal"},tl={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},ol=r(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Kondisi"),U(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Wajib menambahkan keterangan kondisi produk baru atau bekas")],-1)),sl={class:"line-height-normal",style:{"margin-left":"15px"}},nl={class:"grid grid-cols-2 gap-6 md:max-w-lg md:grid-cols-4"},ul={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},il=r(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Deskripsi Produk"),e("br"),e("span",{class:"title-m-2"},"Pastikan deskripsi produk memuat penjelasan detail terkait produkmu."),e("br"),e("span",{class:"title-m-2"},"agar pembeli mudah mengerti dan menemukan produkmu.")],-1)),dl={class:"line-height-normal"},rl=r(()=>e("br",null,null,-1)),cl={class:"border-muted-200"},ml={class:"nui-card nui-card-rounded-sm nui-card-default"},pl={class:"bg-white dark:bg-muted-800/70 p-10"},vl={class:"mb-2"},hl=r(()=>e("h3",{class:"nui-heading nui-heading-md nui-weight-medium nui-lead-normal"}," Varian Produk ",-1)),_l=r(()=>e("span",{class:"nui-text nui-content-xs nui-weight-normal nui-lead-normal text-muted-400"}," tambah varian agar pembeli dapat memilih produk yang sesuai ",-1)),gl={key:2,class:"modal"},bl={class:"modal-content"},kl=r(()=>e("p",null,"Yakin akan menghapus?",-1)),Vl=r(()=>e("br",null,null,-1)),fl={key:0,class:"mb-2"},yl=r(()=>e("br",null,null,-1)),wl={class:"border-muted-200"},$l={class:"nui-card nui-card-rounded-sm nui-card-default"},Ul={class:"bg-white dark:bg-muted-800/70 p-10"},Sl={class:"mb-2"},Cl=r(()=>e("div",{class:"mlls"},[e("div",{class:"title-m-1"},"Harga"),e("div",{class:"title-m-2"},"Ini adalah informasi yang pertama ditampilkan untuk pelanggan")],-1)),Il={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Pl=r(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Minimum Pesanan"),U(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Atur jumlah minimum yang harus dibeli untuk produk ini.")],-1)),Tl={class:"line-height-normal"},Bl={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Dl=r(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Harga Satuan"),U(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Atur jumlah minimum yang harus dibeli untuk produk ini.")],-1)),jl={class:"line-height-normal"},zl=r(()=>e("br",null,null,-1)),Nl={class:"border-muted-200"},Ol={class:"nui-card nui-card-rounded-sm nui-card-default"},Al={class:"bg-white dark:bg-muted-800/70 p-10"},Fl={class:"mb-2"},xl=r(()=>e("div",{class:"mlls"},[e("div",{class:"title-m-1"},"Pengelolaan Produk"),e("div",{class:"title-m-2"},"Ini adalah informasi yang pertama ditampilkan untuk pelanggan")],-1)),Kl={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Rl=r(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Status Produk"),e("br"),e("span",{class:"title-m-2"},"Jika status aktif, produkmu dapat dicari oleh calon pembeli.")],-1)),Jl={class:"line-height-normal"},Hl={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Wl=r(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Stok Produk"),U(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Jumlah barang atau unit yang tersedia untuk dijual.")],-1)),El={class:"line-height-normal"},Gl=r(()=>e("br",null,null,-1)),Ll={class:"border-muted-200"},Ml={class:"nui-card nui-card-rounded-sm nui-card-default"},ql={class:"bg-white dark:bg-muted-800/70 p-10"},Yl={class:"mb-2"},Ql=r(()=>e("div",{class:"mlls"},[e("div",{class:"title-m-1"},"Berat & Pengiriman"),e("div",{class:"title-m-2"},"Ini adalah informasi yang pertama ditampilkan untuk pelanggan")],-1)),Xl={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Zl=r(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Berat Produk"),e("br"),e("span",{class:"title-m-2"},"Jumlah barang atau unit yang tersedia untuk dijual.")],-1)),et={class:"line-height-normal"},at={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},lt=r(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Ukuran Produk"),e("br"),e("span",{class:"title-m-2"},"Masukkan ukuran produk setelah dikemas untuk menghitung berat volume.")],-1)),tt={class:"line-height-normal grid grid-cols-1 md:grid-cols-3 gap-4"},ot={class:"flex justify-center fixed bottom-8 inset-x-0"},st={class:"p-6 rounded-lg shadow-inner bg-white w-fit line-height-normal"},nt=r(()=>e("button",{type:"submit",class:"static nui-button nui-button-md nui-button-rounded-sm nui-button-solid nui-button-primary !h-12 sm:w-40 mx-2 transform transition-transform duration-300 hover:scale-105"}," Submit ",-1)),ut=Z({__name:"ProdukCreate",setup(D){be();const{token:i}=Pe();ke();const v=Te(),_=p(!1),I=p([]),g=p(null),k=p([]),N=p([]),j=p(null);p([]);const s=p({name:"",description:"",stock:null,price:null,images:null,condition:null,video_url:null,min_order:null,weight:null,length:null,width:null,height:null,is_active:!0,product_category_id:null,attributes:null}),T=X({get:()=>g.value?g.value.id:null,set:m=>{g.value=I.value.find(t=>t.id===m)||null}});ne(g,async m=>{m?k.value=m.form_definition:k.value=[]}),X({get:()=>j.value?j.value.id:null,set:m=>{j.value=N.value.find(t=>t.id===m)||null}}),p(null);const w=p(!1);le(()=>{const m=sessionStorage.getItem("formData");m&&(s.value=JSON.parse(m))}),le(async()=>{try{const m=sessionStorage.getItem("shopId");console.log("shopid",m),w.value=!0;const[t,B]=await Promise.all([Q(`https://api.dev.commerce.waktoo.com:443/api/shops/${m}/categories`).headers({Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"}).get().json(),Q("https://api.dev.commerce.waktoo.com:443/api/product-showcase").headers({Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"}).get().json()]);t&&t.status==="success"?I.value=t.data.category:console.error("Failed to fetch data from product-categories API:",t),B&&B.status==="success"?N.value=B.data.showcase:console.error("Failed to fetch data from product-showcase API:",B)}catch(m){m.value=m.message,console.error("Error:",m)}finally{w.value=!1}});const $=p(Array(10).fill(null)),P=p(!1),K=()=>{_.value?P.value=!0:_.value=!_.value},oe=()=>{_.value=!_.value,P.value=!1},ee=()=>{P.value=!1};le(()=>{const m=sessionStorage.getItem("formData");m&&(s.value=JSON.parse(m))});const ae=async()=>{try{const m=sessionStorage.getItem("shopId");if(console.log("shopId:",m),!m){console.error("Shop ID not found");return}const t={...s.value,attributes:k.value,product_category_id:T.value};if(console.log("Selected Category ID:",T.value),console.log("Form Data:",t),!i.value){console.error("Token not found");return}console.log("Token:",i.value);const B=await Q("https://api.dev.commerce.waktoo.com:443/api/product-data").headers({Authorization:`Bearer ${i.value}`}).post(t).json();if(console.log("Product Response:",B),B.status!=="success"){console.error("Failed to save product:",B.error),v.show({title:"Gagal",message:"Gagal membuat produk",closable:!0,color:"danger"});return}const z=B.data.product_data.id;console.log("Product ID:",z);const H=new FormData;$.value.forEach(R=>{R&&H.append("images[]",R[0])}),console.log("Save Images:",H);const W=await(await fetch(`https://api.dev.commerce.waktoo.com:443/api/files/product-images/${z}`,{method:"POST",headers:{Authorization:`Bearer ${i.value}`},body:H})).json();if(console.log("Image Upload Response:",W),W.status!=="success"){v.show({title:"Gagal",message:"Gagal mengupload gambar",closable:!0,color:"danger"});return}if(_.value==!0){const R=sessionStorage.getItem("productData");if(!R){console.error("No product data found in sessionStorage");return}const h=JSON.parse(R);console.log("product data",h),console.log("id",z);const u={...h,product_data_id:z};console.log("formDataToVarian",u);const c=await Q("https://api.dev.commerce.waktoo.com:443/api/product-data/multiple-variants").headers({Authorization:`Bearer ${i.value}`}).post(u).json();if(console.log("Varian Response:",c),c.status!=="success"){v.show({title:"Gagal",message:"Gagal membuat varian produk",closable:!0,color:"danger"});return}v.show({title:"Sukses",message:"Berhasil membuat varian produk",closable:!0,color:"success"}),se("/admin-produk")}else v.show({title:"Sukses",message:"Berhasil membuat produk",closable:!0,color:"success"}),se("/admin-produk")}catch(m){console.error("Error:",m),v.show({title:"Gagal",message:"Gagal membuat produk",closable:!0,color:"danger"})}},L=[{label:"Home",hideLabel:!1,icon:"lucide:home",to:"/toko-admin"},{label:"Produk",hideLabel:!1,to:"/admin-produk"},{label:"Tambah Produk",hideLabel:!1,to:"#"}];return(m,t)=>{const B=ve,z=ye,H=we,V=ce,W=me,R=Ve("center"),h=$e,u=Ue,c=Se,O=Ce,E=ue,M=va,d=Ie;return w.value?(o(),te(B,{key:0,type:"spinner"})):(o(),n("form",{key:1,onSubmit:G(ae,["prevent"])},[e("div",ha,[l(H,{items:L},{default:C(()=>[l(z,{name:"lucide:chevron-right",class:"block size-3"})]),_:1})]),e("div",_a,[e("div",ga,[e("div",ba,[e("div",ka,[Va,e("div",fa,[ya,e("div",wa,[l(V,{placeholder:"Contoh: Jenis/Kategori Produk + Merek + Keterangan",modelValue:s.value.name,"onUpdate:modelValue":t[0]||(t[0]=a=>s.value.name=a)},null,8,["modelValue"])])]),e("div",$a,[Ua,e("div",Sa,[l(W,{rounded:"sm",modelValue:T.value,"onUpdate:modelValue":t[1]||(t[1]=a=>T.value=a)},{default:C(()=>[Ca,(o(!0),n(A,null,x(I.value,a=>(o(),n("option",{key:a.id,value:a.id},S(a.name),9,Ia))),128))]),_:1},8,["modelValue"])])]),k.value.length>0?(o(),n("div",Pa,[(o(!0),n(A,null,x(k.value,(a,y)=>(o(),n("div",{key:a.id,class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},[e("div",Ta,[e("span",Ba,S(a.label),1),a.required?(o(),n("span",Da,"Wajib")):J("",!0),ja]),e("div",za,[l(V,{modelValue:a.id,"onUpdate:modelValue":b=>a.id=b,type:"hidden"},null,8,["modelValue","onUpdate:modelValue"]),l(V,{modelValue:a.name,"onUpdate:modelValue":b=>a.name=b,type:"hidden"},null,8,["modelValue","onUpdate:modelValue"]),l(V,{modelValue:a.type,"onUpdate:modelValue":b=>a.type=b,type:"hidden"},null,8,["modelValue","onUpdate:modelValue"]),l(V,{modelValue:a.label,"onUpdate:modelValue":b=>a.label=b,type:"hidden"},null,8,["modelValue","onUpdate:modelValue"]),l(V,{modelValue:a.required,"onUpdate:modelValue":b=>a.required=b,type:"hidden"},null,8,["modelValue","onUpdate:modelValue"]),l(V,{modelValue:a.placeholder,"onUpdate:modelValue":b=>a.placeholder=b,type:"hidden"},null,8,["modelValue","onUpdate:modelValue"]),a.type==="text"||a.type==="number"?(o(),te(V,{key:0,type:a.type,name:a.name,modelValue:a.value,"onUpdate:modelValue":b=>a.value=b,placeholder:a.placeholder},null,8,["type","name","modelValue","onUpdate:modelValue","placeholder"])):J("",!0),a.type==="select"?(o(),te(W,{key:1,modelValue:a.value,"onUpdate:modelValue":b=>a.value=b},{default:C(()=>[(o(!0),n(A,null,x(a.options,b=>(o(),n("option",{key:b,value:b},S(b),9,Na))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):J("",!0)])]))),128))])):J("",!0)])])])]),Oa,e("div",Aa,[e("div",Fa,[e("div",xa,[e("div",Ka,[Ra,e("div",Ja,[Ha,e("div",Wa,[e("div",Ea,[(o(),n(A,null,x(10,a=>e("div",{key:a,class:"photo-upload-item"},[l(u,{modelValue:$.value[a-1],"onUpdate:modelValue":y=>$.value[a-1]=y,accept:"image/*"},{default:C(({open:y,remove:b,preview:pe,files:F})=>[e("div",Ga,[F!=null&&F.length&&F.item(0)?(o(),n("img",{key:0,src:pe(F.item(0)).value,alt:"Upload preview",class:"img-close-foto"},null,8,La)):(o(),n("div",Ma,[l(R,null,{default:C(()=>[qa]),_:1}),Ya,U(" "+S(a===1?"Foto Utama":"Foto Ke - "+a),1)])),F!=null&&F.length&&F.item(0)?(o(),n("div",Qa,[l(h,{size:"sm",rounded:"full","data-nui-tooltip":"Remove image",class:"scale-90",onClick:dt=>b(F.item(0))},{default:C(()=>[l(z,{name:"lucide:x",class:"size-4"})]),_:2},1032,["onClick"])])):(o(),n("div",Xa,[e("div",Za,[l(h,{size:"sm",rounded:"full",class:"button-foto",onClick:y},{default:C(()=>[l(z,{name:"lucide:plus",class:"size-4"})]),_:2},1032,["onClick"])])]))])]),_:2},1032,["modelValue","onUpdate:modelValue"])])),64))])])]),e("div",el,[al,e("div",ll,[l(V,{placeholder:"Contoh: www.commerce.com",modelValue:s.value.video_url,"onUpdate:modelValue":t[2]||(t[2]=a=>s.value.video_url=a)},null,8,["modelValue"])])]),e("div",tl,[ol,e("div",sl,[e("div",nl,[l(c,{modelValue:s.value.condition,"onUpdate:modelValue":t[3]||(t[3]=a=>s.value.condition=a),name:"checkbox_base",value:"1",label:"Baru",color:"warning",type:"number"},null,8,["modelValue"]),l(c,{modelValue:s.value.condition,"onUpdate:modelValue":t[4]||(t[4]=a=>s.value.condition=a),name:"checkbox_base",value:"0",label:"Bekas",color:"warning",type:"number"},null,8,["modelValue"])])])]),e("div",ul,[il,e("div",dl,[l(O,{placeholder:"Tuliskan detail Produk....",modelValue:s.value.description,"onUpdate:modelValue":t[5]||(t[5]=a=>s.value.description=a)},null,8,["modelValue"])])])])])])]),rl,e("div",cl,[e("div",ml,[e("div",pl,[e("div",vl,[hl,_l,_.value?(o(),n("button",{key:0,onClick:G(K,["prevent"]),class:"nui-button nui-button-small nui-button-rounded nui-button-solid float-right"},S(_.value?"Hapus Varian":"Tambah Varian"),1)):(o(),n("button",{key:1,onClick:G(K,["prevent"]),class:"nui-button nui-button-small nui-button-rounded nui-button-solid float-right"},[l(z,{name:"lucide:plus",class:"h-4 w-4"}),U(" "+S(_.value?"Hapus Varian":"Tambah Varian"),1)])),P.value?(o(),n("div",gl,[e("div",bl,[kl,l(E,{onClick:oe},{default:C(()=>[U("Yes")]),_:1}),l(E,{onClick:ee},{default:C(()=>[U("No")]),_:1})])])):J("",!0)]),Vl,_.value?(o(),n("div",fl,[l(M)])):J("",!0)])])]),yl,e("div",wl,[e("div",$l,[e("div",Ul,[e("div",Sl,[Cl,e("div",Il,[Pl,e("div",Tl,[l(V,{placeholder:"Contoh: 3",modelValue:s.value.min_order,"onUpdate:modelValue":t[6]||(t[6]=a=>s.value.min_order=a),type:"number"},null,8,["modelValue"])])]),e("div",Bl,[Dl,e("div",jl,[l(V,{placeholder:"Contoh: Rp10.000",modelValue:s.value.price,"onUpdate:modelValue":t[7]||(t[7]=a=>s.value.price=a),type:"number"},null,8,["modelValue"])])])])])])]),zl,e("div",Nl,[e("div",Ol,[e("div",Al,[e("div",Fl,[xl,e("div",Kl,[Rl,e("div",Jl,[l(d,{label:"Aktifkan Produk",color:"primary",modelValue:s.value.is_active,"onUpdate:modelValue":t[8]||(t[8]=a=>s.value.is_active=a)},null,8,["modelValue"])])]),e("div",Hl,[Wl,e("div",El,[l(V,{placeholder:"Contoh: 3",modelValue:s.value.stock,"onUpdate:modelValue":t[9]||(t[9]=a=>s.value.stock=a),type:"number"},null,8,["modelValue"])])])])])])]),Gl,e("div",Ll,[e("div",Ml,[e("div",ql,[e("div",Yl,[Ql,e("div",Xl,[Zl,e("div",et,[l(V,{placeholder:"Contoh: 1",modelValue:s.value.weight,"onUpdate:modelValue":t[10]||(t[10]=a=>s.value.weight=a),type:"number"},null,8,["modelValue"])])]),e("div",at,[lt,e("div",tt,[l(V,{placeholder:"Panjang (cm)",modelValue:s.value.length,"onUpdate:modelValue":t[11]||(t[11]=a=>s.value.length=a),type:"number"},null,8,["modelValue"]),l(V,{placeholder:"Lebar (cm)",modelValue:s.value.width,"onUpdate:modelValue":t[12]||(t[12]=a=>s.value.width=a),type:"number"},null,8,["modelValue"]),l(V,{placeholder:"Tinggi (cm)",modelValue:s.value.height,"onUpdate:modelValue":t[13]||(t[13]=a=>s.value.height=a),type:"number"},null,8,["modelValue"])])])])])])]),e("div",ot,[e("div",st,[e("button",{type:"button",class:"static nui-button nui-button-md nui-button-rounded-sm nui-button-solid nui-button-default !h-12 sm:w-40 mx-2 transform transition-transform duration-300 hover:scale-105",onClick:t[14]||(t[14]=(...a)=>m.cancel&&m.cancel(...a))}," Cancel "),nt])])],32))}}}),it=re(ut,[["__scopeId","data-v-8f4948c2"]]),Ct=Z({__name:"tambah-produk",setup(D){return(i,v)=>{const _=it;return o(),n("div",null,[l(_,{class:"pe-4 xl:pe-10"})])}}});export{Ct as default};
