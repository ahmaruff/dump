import{d as A,N as H,D as J,r as l,L as D,E as O,o as d,e as r,g as e,h as n,i as b,F as x,k as C,t as $,G as R,f as _,H as Q,_ as X,y as Y,z as Z,m,A as ee}from"./DmTmMO_-.js";import{_ as se}from"./21j5a1Cb.js";import{_ as ae}from"./C_jKOqdG.js";import{_ as te}from"./BaWAYAlg.js";import{_ as oe}from"./Wwwchkvl.js";import{u as U}from"./BHLlrkjG.js";import{u as ie}from"./BCX54yQo.js";import"./D7JqdvHr.js";import"./C100mYQ1.js";import"./DzMF6t2X.js";import"./CSxYk3-N.js";import"./DLP8OW-a.js";import"./C5pBaPI_.js";const i=p=>(Y("data-v-b243ff15"),p=p(),Z(),p),le={class:"mb-2"},ne={class:"border-muted-200"},de={class:"nui-card nui-card-rounded-sm nui-card-default"},re={class:"bg-white dark:bg-muted-800/70 p-10"},ce={class:"mb-2"},ue=i(()=>e("div",{class:"mlls"},[e("div",{class:"title-m-1"},"Informasi Toko"),e("div",{class:"title-m-2"},"Ini adalah informasi yang pertama ditampilkan untuk pelanggan")],-1)),me={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},pe=i(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Nama Toko"),m(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Nama toko minimal mempunyai 5 karakter.")],-1)),_e={class:"line-height-normal"},he={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},ve=i(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Deskripsi Toko"),e("br"),e("span",{class:"title-m-2"},"Pastikan deskripsi toko memuat penjelasan detail terkait tokomu."),e("br"),e("span",{class:"title-m-2"},"agar pembeli mudah mengerti dan menemukan tokomu.")],-1)),ge={class:"line-height-normal"},fe={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},be=i(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"No Telepon / Wa"),m(),e("span",{class:"alert-red"},"Wajib"),e("br")],-1)),ke={class:"line-height-normal"},ye=i(()=>e("br",null,null,-1)),we={class:"border-muted-200"},Ve={class:"nui-card nui-card-rounded-sm nui-card-default"},Te={class:"bg-white dark:bg-muted-800/70 p-10"},je={class:"mb-2"},Ie=i(()=>e("div",{class:"mlls"},[e("div",{class:"title-m-1"},"Alamat"),e("div",{class:"title-m-2"},"Ini adalah informasi yang pertama ditampilkan untuk pelanggan")],-1)),Pe={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},xe=i(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Provinsi"),m(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Pilih Provinsi yang sesuai dengan alamatmu.")],-1)),Ce={class:"line-height-normal"},$e=i(()=>e("option",{value:null},"Pilih Provinsi",-1)),Be=["value"],Ee={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Ke=i(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Kota / Kabupaten"),m(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Pilih Kota / Kabupaten yang sesuai dengan alamatmu.")],-1)),Ne={class:"line-height-normal"},Se=i(()=>e("option",{value:null},"Pilih Kota / Kabupaten",-1)),De=["value"],Ue={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Ae=i(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Kecamatan"),m(),e("span",{class:"alert-red"},"Wajib"),e("br"),e("span",{class:"title-m-2"},"Pilih Kecamatan yang sesuai dengan alamatmu.")],-1)),Fe={class:"line-height-normal"},We=i(()=>e("option",{value:null},"Pilih Kecamatan",-1)),qe=["value"],Ge={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},Le=i(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Kode Pos"),m(),e("span",{class:"alert-red"},"Wajib"),e("br")],-1)),Me={class:"line-height-normal"},ze={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mlls"},He=i(()=>e("div",{class:"line-height-normal"},[e("span",{class:"title-m-3"},"Alamat"),e("br"),e("span",{class:"title-m-2"},"Pastikan deskripsi alamat memuat penjelasan detail terkait alamatmu."),e("br")],-1)),Je={class:"line-height-normal"},Oe={class:"flex justify-center fixed bottom-8 inset-x-0"},Re={class:"p-6 rounded-lg shadow-inner bg-white w-fit line-height-normal"},Qe=i(()=>e("button",{type:"submit",class:"static nui-button nui-button-md nui-button-rounded-sm nui-button-solid nui-button-primary !h-12 sm:w-40 mx-2 transform transition-transform duration-300 hover:scale-105"}," Submit ",-1)),Xe=A({__name:"TokoEdit",setup(p){H();const{token:k}=U(),h=ie(),v=J().params.id,{user:F,loggedIn:Ze}=U(),o=l({user_id:F.value.id,name:"",description:"",phone:"",address:"",origin_id:"",origin_type:"subdistrict",postal_code:"",latitude:0,longitude:0,city_id:"",province_id:""}),E=l([]),K=l([]),N=l([]),c=l(null),u=l(null),g=l(null),y=l(!1),w=l(!1),V=l(!1),f=l(null),W=async()=>{try{y.value=!0;const a=await _("https://api.dev.commerce.waktoo.com:443/api/shipping/province").headers({"Content-Type":"application/json"}).get().json();(a==null?void 0:a.status)==="success"?E.value=a.data.province:console.error("Failed to fetch provinces:",a)}catch(a){f.value=a.message,console.error("Error fetching provinces:",a)}finally{y.value=!1}},T=async()=>{const a=c.value;if(a)try{w.value=!0;const s=await _(`https://api.dev.commerce.waktoo.com:443/api/shipping/city?province_id=${a}`).headers({"Content-Type":"application/json"}).get().json();(s==null?void 0:s.status)==="success"?K.value=s.data.city:console.error("Failed to fetch cities:",s)}catch(s){f.value=s.message,console.error("Error fetching cities:",s)}finally{w.value=!1}},j=async()=>{const a=u.value;if(a)try{V.value=!0;const s=await _(`https://api.dev.commerce.waktoo.com:443/api/shipping/subdistrict?city_id=${a}`).headers({"Content-Type":"application/json"}).get().json();(s==null?void 0:s.status)==="success"?N.value=s.data.subdistrict:console.error("Failed to fetch districts:",s)}catch(s){f.value=s.message,console.error("Error fetching districts:",s)}finally{V.value=!1}};D(c,T),D(u,j);const q=async()=>{try{const a=await _(`https://api.dev.commerce.waktoo.com:443/api/shops/${v}`).headers({"Content-Type":"application/json"}).get().json();a.status==="success"?(o.value=a.data.shop,c.value=o.value.province_id,u.value=o.value.city_id,g.value=o.value.origin_id,await T(),await j()):console.error("Failed to fetch shop data:",a)}catch(a){f.value=a.message,console.error("Error fetching shop data:",a)}},G=async()=>{try{const a={...o.value,province_id:c.value,city_id:u.value,origin_id:g.value};console.log("token",k.value),console.log("form",a),alert("yeee");const s=await _(`https://api.dev.commerce.waktoo.com:443/api/shops/${v}`).headers({Authorization:`Bearer ${k.value}`,"Content-Type":"application/json"}).put(a).json();alert("adsa"),s.status==="success"?(h.show({title:"Sukses",message:"Berhasil edit toko",closable:!0,color:"success"}),Q(`/toko-admin/${v}`)):h.show({title:"Gagal",message:"Gagal edit toko",closable:!0,color:"danger"})}catch(a){h.show({title:"Gagal",message:"Gagal edit toko",closable:!0,color:"danger"}),console.error("Error submitting form:",a)}};O(()=>{W(),q()});const L=[{label:"Home",hideLabel:!1,icon:"lucide:home",to:"/toko-admin"},{label:"Detail Toko",hideLabel:!1,to:`/toko-admin/${v}`},{label:"Edit Toko",hideLabel:!1,to:"#"}];return(a,s)=>{const M=X,z=se,I=ae,S=te,P=oe;return d(),r("form",{onSubmit:R(G,["prevent"])},[e("div",le,[n(z,{items:L},{default:b(()=>[n(M,{name:"lucide:chevron-right",class:"block size-3"})]),_:1})]),e("div",ne,[e("div",de,[e("div",re,[e("div",ce,[ue,e("div",me,[pe,e("div",_e,[n(I,{placeholder:"Masukan Nama Toko",modelValue:o.value.name,"onUpdate:modelValue":s[0]||(s[0]=t=>o.value.name=t)},null,8,["modelValue"])])]),e("div",he,[ve,e("div",ge,[n(S,{placeholder:"Tuliskan detail Toko....",modelValue:o.value.description,"onUpdate:modelValue":s[1]||(s[1]=t=>o.value.description=t)},null,8,["modelValue"])])]),e("div",fe,[be,e("div",ke,[n(I,{placeholder:"Masukan No Telepon",modelValue:o.value.phone,"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.phone=t),required:""},null,8,["modelValue"])])])])])])]),ye,e("div",we,[e("div",Ve,[e("div",Te,[e("div",je,[Ie,e("div",Pe,[xe,e("div",Ce,[n(P,{rounded:"sm",modelValue:c.value,"onUpdate:modelValue":s[3]||(s[3]=t=>c.value=t),onChange:T,id:"province",loading:y.value,required:""},{default:b(()=>[$e,(d(!0),r(x,null,C(E.value,t=>(d(),r("option",{key:t.province_id,value:t.province_id},$(t.province_name),9,Be))),128))]),_:1},8,["modelValue","loading"])])]),e("div",Ee,[Ke,e("div",Ne,[n(P,{rounded:"sm",modelValue:u.value,"onUpdate:modelValue":s[4]||(s[4]=t=>u.value=t),disabled:!c.value,onChange:j,id:"city",loading:w.value,required:""},{default:b(()=>[Se,(d(!0),r(x,null,C(K.value,t=>(d(),r("option",{key:t.city_id,value:t.city_id},$(t.city_name),9,De))),128))]),_:1},8,["modelValue","disabled","loading"])])]),e("div",Ue,[Ae,e("div",Fe,[n(P,{rounded:"sm",modelValue:g.value,"onUpdate:modelValue":s[5]||(s[5]=t=>g.value=t),disabled:!u.value,id:"district",loading:V.value,required:""},{default:b(()=>[We,(d(!0),r(x,null,C(N.value,t=>(d(),r("option",{key:t.subdistrict_id,value:t.subdistrict_id},$(t.subdistrict_name),9,qe))),128))]),_:1},8,["modelValue","disabled","loading"])])]),e("div",Ge,[Le,e("div",Me,[n(I,{placeholder:"Masukan kode pos",modelValue:o.value.postal_code,"onUpdate:modelValue":s[6]||(s[6]=t=>o.value.postal_code=t),required:""},null,8,["modelValue"])])]),e("div",ze,[He,e("div",Je,[n(S,{placeholder:"Tuliskan detail Alamat....",modelValue:o.value.address,"onUpdate:modelValue":s[7]||(s[7]=t=>o.value.address=t),required:""},null,8,["modelValue"])])])])])])]),e("div",Oe,[e("div",Re,[e("button",{type:"button",class:"static nui-button nui-button-md nui-button-rounded-sm nui-button-solid nui-button-default !h-12 sm:w-40 mx-2 transform transition-transform duration-300 hover:scale-105",onClick:s[8]||(s[8]=t=>a.router.back())}," Cancel "),Qe])])],32)}}}),Ye=ee(Xe,[["__scopeId","data-v-b243ff15"]]),ps=A({__name:"[id]",setup(p){return(k,h)=>{const B=Ye;return d(),r("div",null,[n(B)])}}});export{ps as default};
